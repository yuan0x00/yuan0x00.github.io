<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Android 应用启动流程 | Blog</title>
    <meta name="description" content="A VitePress site">
    <meta name="generator" content="VitePress v2.0.0-alpha.14">
    <link rel="preload stylesheet" href="/assets/style.a894IyEu.css" as="style">
    <link rel="preload stylesheet" href="/vp-icons.css" as="style">
    <script type="module" src="/assets/chunks/metadata.058c0ce6.js"></script>
    <script type="module" src="/assets/app.Cy68rcnR.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/theme.DqDx1y7h.js">
    <link rel="modulepreload" href="/assets/chunks/framework.GtCa91sV.js">
    <link rel="modulepreload" href="/assets/android_语言与基础_Android应用启动流程.md.DG8Igif8.lean.js">
    <link rel="icon" type="image/svg+xml" href="https://vitepress.dev/vitepress-logo-mini.svg">
    <link rel="icon" type="image/png" href="https://vitepress.dev/vitepress-logo-mini.png">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-1df9f90f><!--[--><!--]--><!--[--><span tabindex="-1" data-v-331ec75c></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-331ec75c>Skip to content</a><!--]--><!----><header class="VPNav" data-v-1df9f90f data-v-9f75dce3><div class="VPNavBar" data-v-9f75dce3 data-v-70946a35><div class="wrapper" data-v-70946a35><div class="container" data-v-70946a35><div class="title" data-v-70946a35><div class="VPNavBarTitle has-sidebar" data-v-70946a35 data-v-1e38c6bc><a class="title" href="/" data-v-1e38c6bc><!--[--><!--]--><!--[--><img class="VPImage logo" src="/android.svg" width="24" height="24" alt data-v-8426fc1a><!--]--><span data-v-1e38c6bc>Blog</span><!--[--><!--]--></a></div></div><div class="content" data-v-70946a35><div class="content-body" data-v-70946a35><!--[--><!--]--><div class="VPNavBarSearch search" data-v-70946a35><!--[--><!----><div id="local-search"><button type="button" aria-label="Search" aria-keyshortcuts="/ control+k meta+k" class="DocSearch DocSearch-Button"><span class="DocSearch-Button-Container"><span class="vpi-search DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key"></kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-70946a35 data-v-39714824><span id="main-nav-aria-label" class="visually-hidden" data-v-39714824> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/" tabindex="0" data-v-39714824 data-v-52a1d768><!--[--><span data-v-52a1d768>首页</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/android/" tabindex="0" data-v-39714824 data-v-52a1d768><!--[--><span data-v-52a1d768>Android</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/java/" tabindex="0" data-v-39714824 data-v-52a1d768><!--[--><span data-v-52a1d768>Java</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/kotlin/" tabindex="0" data-v-39714824 data-v-52a1d768><!--[--><span data-v-52a1d768>Kotlin</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-70946a35 data-v-6c893767><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-6c893767 data-v-5337faa4 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-5337faa4></span><span class="vpi-moon moon" data-v-5337faa4></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-70946a35 data-v-0394ad82 data-v-d07f11e6><!--[--><a class="VPSocialLink no-icon" href="https://github.com/yuan0x00" aria-label="github" target="_blank" rel="me noopener" data-v-d07f11e6 data-v-591a6b30><span class="vpi-social-github"></span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-70946a35 data-v-bf2fac68 data-v-42cb505d><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-42cb505d><span class="vpi-more-horizontal icon" data-v-42cb505d></span></button><div class="menu" data-v-42cb505d><div class="VPMenu" data-v-42cb505d data-v-25a6cce8><!----><!--[--><!--[--><!----><div class="group" data-v-bf2fac68><div class="item appearance" data-v-bf2fac68><p class="label" data-v-bf2fac68>深浅模式</p><div class="appearance-action" data-v-bf2fac68><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-bf2fac68 data-v-5337faa4 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-5337faa4></span><span class="vpi-moon moon" data-v-5337faa4></span><!--]--></span></span></button></div></div></div><div class="group" data-v-bf2fac68><div class="item social-links" data-v-bf2fac68><div class="VPSocialLinks social-links-list" data-v-bf2fac68 data-v-d07f11e6><!--[--><a class="VPSocialLink no-icon" href="https://github.com/yuan0x00" aria-label="github" target="_blank" rel="me noopener" data-v-d07f11e6 data-v-591a6b30><span class="vpi-social-github"></span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-70946a35 data-v-e5dd9c1c><span class="container" data-v-e5dd9c1c><span class="top" data-v-e5dd9c1c></span><span class="middle" data-v-e5dd9c1c></span><span class="bottom" data-v-e5dd9c1c></span></span></button></div></div></div></div><div class="divider" data-v-70946a35><div class="divider-line" data-v-70946a35></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-1df9f90f data-v-db738f89><div class="container" data-v-db738f89><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-db738f89><span class="vpi-align-left menu-icon" data-v-db738f89></span><span class="menu-text" data-v-db738f89>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-db738f89 data-v-0bf0e06f><button data-v-0bf0e06f>返回顶部</button><!----></div></div></div><aside class="VPSidebar" data-v-1df9f90f data-v-af661f50><div class="curtain" data-v-af661f50></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-af661f50><span class="visually-hidden" id="sidebar-aria-label" data-v-af661f50> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-8d50c081><section class="VPSidebarItem level-0 collapsible" data-v-8d50c081 data-v-d81de50c><div class="item" role="button" tabindex="0" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><h2 class="text" data-v-d81de50c>Android</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-d81de50c><span class="vpi-chevron-right caret-icon" data-v-d81de50c></span></div></div><div class="items" data-v-d81de50c><!--[--><div class="VPSidebarItem level-1 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/android/" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>概览</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-8d50c081><section class="VPSidebarItem level-0 collapsible" data-v-8d50c081 data-v-d81de50c><div class="item" role="button" tabindex="0" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><h2 class="text" data-v-d81de50c>面试</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-d81de50c><span class="vpi-chevron-right caret-icon" data-v-d81de50c></span></div></div><div class="items" data-v-d81de50c><!--[--><div class="VPSidebarItem level-1 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/android/%E9%9D%A2%E8%AF%95/%E9%9D%A2%E8%AF%95%E9%AB%98%E9%A2%91%E9%A2%98" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>面试高频题</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-8d50c081><section class="VPSidebarItem level-0 collapsible has-active" data-v-8d50c081 data-v-d81de50c><div class="item" role="button" tabindex="0" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><h2 class="text" data-v-d81de50c>语言与基础</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-d81de50c><span class="vpi-chevron-right caret-icon" data-v-d81de50c></span></div></div><div class="items" data-v-d81de50c><!--[--><div class="VPSidebarItem level-1 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/android/%E8%AF%AD%E8%A8%80%E4%B8%8E%E5%9F%BA%E7%A1%80/Android%E5%BA%94%E7%94%A8%E6%9E%84%E5%BB%BA%E6%B5%81%E7%A8%8B" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>Android应用构建流程</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/android/%E8%AF%AD%E8%A8%80%E4%B8%8E%E5%9F%BA%E7%A1%80/Android%E5%BA%94%E7%94%A8%E5%90%AF%E5%8A%A8%E6%B5%81%E7%A8%8B" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>Android应用启动流程</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-8d50c081><section class="VPSidebarItem level-0 collapsible" data-v-8d50c081 data-v-d81de50c><div class="item" role="button" tabindex="0" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><h2 class="text" data-v-d81de50c>主流库原理</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-d81de50c><span class="vpi-chevron-right caret-icon" data-v-d81de50c></span></div></div><div class="items" data-v-d81de50c><!--[--><div class="VPSidebarItem level-1 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/android/%E4%B8%BB%E6%B5%81%E5%BA%93%E5%8E%9F%E7%90%86/Bugly%E5%8E%9F%E7%90%86" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>Bugly原理</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/android/%E4%B8%BB%E6%B5%81%E5%BA%93%E5%8E%9F%E7%90%86/Glide%E5%8E%9F%E7%90%86" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>Glide原理</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/android/%E4%B8%BB%E6%B5%81%E5%BA%93%E5%8E%9F%E7%90%86/LeakCanary%E5%8E%9F%E7%90%86" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>LeakCanary原理</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/android/%E4%B8%BB%E6%B5%81%E5%BA%93%E5%8E%9F%E7%90%86/OkHttp%E5%8E%9F%E7%90%86" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>OkHttp原理</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/android/%E4%B8%BB%E6%B5%81%E5%BA%93%E5%8E%9F%E7%90%86/Retrofit%E5%8E%9F%E7%90%86" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>Retrofit原理</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/android/%E4%B8%BB%E6%B5%81%E5%BA%93%E5%8E%9F%E7%90%86/RxJava%E5%8E%9F%E7%90%86" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>RxJava原理</p><!--]--></a><!----></div><!----></div><section class="VPSidebarItem level-1 collapsible" data-v-d81de50c data-v-d81de50c><div class="item" role="button" tabindex="0" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><h3 class="text" data-v-d81de50c>Jetpack</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-d81de50c><span class="vpi-chevron-right caret-icon" data-v-d81de50c></span></div></div><div class="items" data-v-d81de50c><!--[--><div class="VPSidebarItem level-2 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/android/%E4%B8%BB%E6%B5%81%E5%BA%93%E5%8E%9F%E7%90%86/Jetpack/ConstraintLayout%E5%8E%9F%E7%90%86%E6%BA%90%E7%A0%81" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>ConstraintLayout原理源码</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/android/%E4%B8%BB%E6%B5%81%E5%BA%93%E5%8E%9F%E7%90%86/Jetpack/Hilt%E5%8E%9F%E7%90%86%E6%BA%90%E7%A0%81" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>Hilt原理源码</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/android/%E4%B8%BB%E6%B5%81%E5%BA%93%E5%8E%9F%E7%90%86/Jetpack/Lifecycle%E5%8E%9F%E7%90%86%E6%BA%90%E7%A0%81" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>Lifecycle原理源码</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/android/%E4%B8%BB%E6%B5%81%E5%BA%93%E5%8E%9F%E7%90%86/Jetpack/LiveData%E5%8E%9F%E7%90%86%E6%BA%90%E7%A0%81" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>LiveData原理源码</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/android/%E4%B8%BB%E6%B5%81%E5%BA%93%E5%8E%9F%E7%90%86/Jetpack/RecyclerView%E5%8E%9F%E7%90%86%E6%BA%90%E7%A0%81" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>RecyclerView原理源码</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/android/%E4%B8%BB%E6%B5%81%E5%BA%93%E5%8E%9F%E7%90%86/Jetpack/ViewModel%E5%8E%9F%E7%90%86%E6%BA%90%E7%A0%81" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>ViewModel原理源码</p><!--]--></a><!----></div><!----></div><!--]--></div></section><!--]--></div></section></div><div class="no-transition group" data-v-8d50c081><section class="VPSidebarItem level-0 collapsible" data-v-8d50c081 data-v-d81de50c><div class="item" role="button" tabindex="0" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><h2 class="text" data-v-d81de50c>组件与机制</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-d81de50c><span class="vpi-chevron-right caret-icon" data-v-d81de50c></span></div></div><div class="items" data-v-d81de50c><!--[--><div class="VPSidebarItem level-1 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/android/%E7%BB%84%E4%BB%B6%E4%B8%8E%E6%9C%BA%E5%88%B6/Activity%E8%AF%A6%E8%A7%A3" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>Activity详解</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/android/%E7%BB%84%E4%BB%B6%E4%B8%8E%E6%9C%BA%E5%88%B6/BroadcastReceiver%E8%AF%A6%E8%A7%A3" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>BroadcastReceiver详解</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/android/%E7%BB%84%E4%BB%B6%E4%B8%8E%E6%9C%BA%E5%88%B6/ContentProvider%E8%AF%A6%E8%A7%A3" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>ContentProvider详解</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/android/%E7%BB%84%E4%BB%B6%E4%B8%8E%E6%9C%BA%E5%88%B6/Fragment%E8%AF%A6%E8%A7%A3" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>Fragment详解</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/android/%E7%BB%84%E4%BB%B6%E4%B8%8E%E6%9C%BA%E5%88%B6/Service%E8%AF%A6%E8%A7%A3" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>Service详解</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/android/%E7%BB%84%E4%BB%B6%E4%B8%8E%E6%9C%BA%E5%88%B6/View%E8%AF%A6%E8%A7%A3" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>View详解</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/android/%E7%BB%84%E4%BB%B6%E4%B8%8E%E6%9C%BA%E5%88%B6/Window%E8%AF%A6%E8%A7%A3" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>Window详解</p><!--]--></a><!----></div><!----></div><section class="VPSidebarItem level-1 collapsible" data-v-d81de50c data-v-d81de50c><div class="item" role="button" tabindex="0" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><h3 class="text" data-v-d81de50c>机制</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-d81de50c><span class="vpi-chevron-right caret-icon" data-v-d81de50c></span></div></div><div class="items" data-v-d81de50c><!--[--><div class="VPSidebarItem level-2 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/android/%E7%BB%84%E4%BB%B6%E4%B8%8E%E6%9C%BA%E5%88%B6/%E6%9C%BA%E5%88%B6/Binder%E6%9C%BA%E5%88%B6%E8%AF%A6%E8%A7%A3" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>Binder机制详解</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/android/%E7%BB%84%E4%BB%B6%E4%B8%8E%E6%9C%BA%E5%88%B6/%E6%9C%BA%E5%88%B6/Handler%E6%9C%BA%E5%88%B6%E8%AF%A6%E8%A7%A3" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>Handler机制详解</p><!--]--></a><!----></div><!----></div><!--]--></div></section><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-1df9f90f data-v-c87f25bf><div class="VPDoc has-sidebar has-aside" data-v-c87f25bf data-v-7011f0d8><!--[--><!--]--><div class="container" data-v-7011f0d8><div class="aside" data-v-7011f0d8><div class="aside-curtain" data-v-7011f0d8></div><div class="aside-container" data-v-7011f0d8><div class="aside-content" data-v-7011f0d8><div class="VPDocAside" data-v-7011f0d8 data-v-3f215769><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-3f215769 data-v-60d5052e><div class="content" data-v-60d5052e><div class="outline-marker" data-v-60d5052e></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-60d5052e>目录</div><ul class="VPDocOutlineItem root" data-v-60d5052e data-v-1ce71065><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-3f215769></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-7011f0d8><div class="content-container" data-v-7011f0d8><!--[--><!--]--><main class="main" data-v-7011f0d8><div style="position:relative;" class="vp-doc _android_%E8%AF%AD%E8%A8%80%E4%B8%8E%E5%9F%BA%E7%A1%80_Android%E5%BA%94%E7%94%A8%E5%90%AF%E5%8A%A8%E6%B5%81%E7%A8%8B" data-v-7011f0d8><div><h1 id="android-应用启动流程" tabindex="-1">Android 应用启动流程 <a class="header-anchor" href="#android-应用启动流程" aria-label="Permalink to “Android 应用启动流程”">​</a></h1><h2 id="_1-启动场景概览" tabindex="-1">1. 启动场景概览 <a class="header-anchor" href="#_1-启动场景概览" aria-label="Permalink to “1. 启动场景概览”">​</a></h2><ul><li><strong>冷启动（Cold Start）</strong>：进程不存在，系统需从 Zygote 派生新进程，完成资源装载与首帧绘制，耗时最长。</li><li><strong>热启动（Hot Start）</strong>：进程、Activity 均在前台待机，仅需恢复界面，耗时最短。</li><li><strong>温启动（Warm Start）</strong>：进程常驻但界面被销毁，需要重新创建 Activity 并恢复状态。</li></ul><p>在性能分析中，冷启动最具挑战性，Google Play 的核心指标 <code>Time To Full Display</code> 以冷启动为主要评估对象。</p><h2 id="_2-系统底层准备" tabindex="-1">2. 系统底层准备 <a class="header-anchor" href="#_2-系统底层准备" aria-label="Permalink to “2. 系统底层准备”">​</a></h2><ol><li><strong>Zygote 预热</strong>：</li></ol><ul><li>系统开机时启动 <code>Zygote</code> 进程，预加载核心类库（如 <code>core-libart.jar</code>、<code>framework.jar</code>）、资源与 JNI 库。</li><li>注册 <code>Zygote</code> Socket，等待系统请求派生新进程。</li></ul><ol start="2"><li><strong>System Server 启动</strong>：</li></ol><ul><li><code>Zygote</code> fork 出 <code>system_server</code> 进程，初始化 ActivityManagerService（AMS）、PackageManagerService 等核心服务。</li><li><code>ActivityTaskManagerService</code> (ATMS) 与 WindowManagerService (WMS) 准备好调度 Activity 与窗口的能力。</li></ul><h2 id="_3-启动入口-用户点击图标" tabindex="-1">3. 启动入口：用户点击图标 <a class="header-anchor" href="#_3-启动入口-用户点击图标" aria-label="Permalink to “3. 启动入口：用户点击图标”">​</a></h2><ol><li><strong>Launcher 发送意图</strong>：用户点击桌面图标或其他入口，Launcher 通过 <code>startActivity</code> 向 ATMS 发送 <code>Intent</code>。</li><li><strong>任务栈决策</strong>：ATMS 判断是否已有目标任务栈，决定复用栈顶 Activity 还是创建新任务。</li><li><strong>进程存在性检查</strong>：AMS 查询目标应用进程是否在运行。</li></ol><ul><li>存在：直接调度 Activity 生命周期。</li><li>不存在：进入进程创建流程。</li></ul><h2 id="_4-进程创建流程-冷启动核心" tabindex="-1">4. 进程创建流程（冷启动核心） <a class="header-anchor" href="#_4-进程创建流程-冷启动核心" aria-label="Permalink to “4. 进程创建流程（冷启动核心）”">​</a></h2><ol><li><strong>ProcessRecord 构建</strong>：AMS 构建应用的 <code>ProcessRecord</code>，准备进程启动参数（进程名、UID、SELinux 策略、<code>bindApplication</code> 数据等）。</li><li><strong>向 Zygote 发起请求</strong>：</li></ol><ul><li>调用 <code>Process.start()</code> → 通过 <code>ZygoteProcess</code> 将启动命令写入 Zygote Socket。</li><li>命令包含：进程名、<code>nice name</code>、<code>targetSdk</code>、<code>runtime flags</code>、GID 列表、调试标志等。</li></ul><ol start="3"><li><strong>Zygote fork 子进程</strong>：</li></ol><ul><li>Zygote 收到命令后执行 <code>fork()</code>。</li><li>子进程重置进程状态（UID、GID、SELinux context、nice 值），并加载应用进程入口 <code>ActivityThread</code>。</li></ul><ol start="4"><li><strong>ActivityThread main</strong>：</li></ol><ul><li>子进程调用 <code>ActivityThread.main()</code>，创建主线程（UI 线程）Looper，并向 AMS 发送 <code>attachApplication</code>。</li><li>注册 <code>ApplicationThread</code> Binder 接口，供 AMS 回调。</li></ul><ol start="5"><li><strong>AMS 绑定应用</strong>：</li></ol><ul><li>AMS 收到 <code>attachApplication</code> 后，完成与进程的双向通信绑定。</li><li>触发 <code>Instrumentation.bindApplication</code>，后续通过 <code>scheduleTransaction</code> 驱动组件生命周期。</li></ul><h2 id="_5-应用初始化顺序" tabindex="-1">5. 应用初始化顺序 <a class="header-anchor" href="#_5-应用初始化顺序" aria-label="Permalink to “5. 应用初始化顺序”">​</a></h2><ol><li><strong>ContentProvider 初始化</strong>：</li></ol><ul><li>AMS 在主线程调用 <code>ActivityThread.installProvider</code>，每个 Provider 执行 <code>onCreate</code>。</li><li>注意：此阶段发生在 Application <code>onCreate</code> 之前，耗时 Provider 会阻塞启动。</li></ul><ol start="2"><li><strong>Application 创建</strong>：</li></ol><ul><li>调用 <code>LoadedApk.makeApplication</code> → 执行 <code>Application.attach</code>、<code>onCreate</code>。</li><li>常见初始化操作（SDK 注册、日志系统、DI 容器）在此发生，需控制耗时与主线程阻塞。</li></ul><ol start="3"><li><strong>Activity 启动事务</strong>：</li></ol><ul><li>AMS 发出 <code>LaunchActivityItem</code> 事务。</li><li><code>ActivityThread</code> 解析事务，利用 <code>Instrumentation.newActivity</code> 反射实例化 Activity。</li><li>执行 <code>Activity.attach</code>、<code>onCreate</code>、<code>onStart</code>、<code>onResume</code>，间穿插 <code>Fragment</code> 生命周期。</li></ul><h2 id="_6-首帧呈现流程" tabindex="-1">6. 首帧呈现流程 <a class="header-anchor" href="#_6-首帧呈现流程" aria-label="Permalink to “6. 首帧呈现流程”">​</a></h2><ol><li><strong>setContentView 与视图创建</strong>：</li></ol><ul><li>Activity 在 <code>onCreate</code> 调用 <code>setContentView</code>，加载布局 XML、构建 View 树。</li></ul><ol start="2"><li><strong>ViewRootImpl 建立</strong>：</li></ol><ul><li><code>WindowManager</code> 将 DecorView 与 <code>ViewRootImpl</code> 绑定，发起与 WMS 的窗口同步。</li><li><code>Choreographer</code> 注册 VSync 回调，准备 UI 绘制。</li></ul><ol start="3"><li><strong>三大绘制阶段</strong>：</li></ol><ul><li><strong>measure</strong>：计算 View 尺寸。</li><li><strong>layout</strong>：确定位置。</li><li><strong>draw</strong>：生成显示列表，交给 RenderThread 或 GPU。</li></ul><ol start="4"><li><strong>SurfaceFlinger 合成</strong>：</li></ol><ul><li>RenderThread 输出图像到 Surface。</li><li><code>SurfaceFlinger</code> 将窗口合成后交给显示控制器，完成首帧展示。</li></ul><h2 id="_7-生命周期细节与关键线程" tabindex="-1">7. 生命周期细节与关键线程 <a class="header-anchor" href="#_7-生命周期细节与关键线程" aria-label="Permalink to “7. 生命周期细节与关键线程”">​</a></h2><ul><li><strong>主线程 (UI 线程)</strong>：负责 Activity 生命周期、View 操作、广播接收等，避免超过 16ms 的阻塞操作。</li><li><strong>Binder 线程池</strong>：处理来自系统服务的 Binder 调用（如 AMS）。</li><li><strong>RenderThread</strong>：独立于 UI 线程，执行硬件加速绘制。</li><li><strong>其他初始化线程</strong>：建议通过 <code>HandlerThread</code>、<code>Executors</code> 分担初始化逻辑，避免主线程阻塞。</li></ul><h2 id="_8-性能与优化关键点" tabindex="-1">8. 性能与优化关键点 <a class="header-anchor" href="#_8-性能与优化关键点" aria-label="Permalink to “8. 性能与优化关键点”">​</a></h2><ol><li><strong>Application/ContentProvider 耗时</strong>：</li></ol><ul><li>延迟初始化非关键组件，可结合 <code>App Startup</code>、<code>Jetpack Startup</code>。</li><li>使用 <code>StrictMode</code>、<code>Launch Time Report</code> 监控主线程阻塞。</li></ul><ol start="2"><li><strong>资源加载优化</strong>：</li></ol><ul><li>精简启动 Activity 布局，使用 <code>ViewStub</code>、<code>include</code> 减少层级。</li><li>合理使用 <code>VectorDrawable</code>、<code>WebP</code> 优化资源体积。</li></ul><ol start="3"><li><strong>IO 与网络</strong>：</li></ol><ul><li>启动期避免同步 IO 或网络请求，必要时降级到后台线程并提供占位 UI。</li></ul><ol start="4"><li><strong>Dex 与 ClassLoader</strong>：</li></ol><ul><li>使用 <code>Profile Guided Optimization (PGO)</code>、<code>Baseline Profiles</code> 减少类加载耗时。</li><li>对多 Dex 应用提前合并或拆分合理模块。</li></ul><ol start="5"><li><strong>进程常驻策略</strong>：</li></ol><ul><li>合理使用前台服务、WorkManager 保持常驻，但需平衡耗电与策略限制。</li></ul><h2 id="_9-启动流程时序概览" tabindex="-1">9. 启动流程时序概览 <a class="header-anchor" href="#_9-启动流程时序概览" aria-label="Permalink to “9. 启动流程时序概览”">​</a></h2><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>User Tap</span></span>
<span class="line"><span>  ↓</span></span>
<span class="line"><span>Launcher → ATMS/AMS → (检查或新建任务栈)</span></span>
<span class="line"><span>  ↓</span></span>
<span class="line"><span>[进程存在?]</span></span>
<span class="line"><span>  ├─是：scheduleLaunchActivity → Activity 生命周期</span></span>
<span class="line"><span>  └─否：</span></span>
<span class="line"><span>        AMS → Zygote 请求 → Zygote fork 子进程</span></span>
<span class="line"><span>          ↓</span></span>
<span class="line"><span>        ActivityThread.main → attachApplication</span></span>
<span class="line"><span>          ↓</span></span>
<span class="line"><span>        安装 ContentProvider → Application.onCreate</span></span>
<span class="line"><span>          ↓</span></span>
<span class="line"><span>        scheduleLaunchActivity → Activity onCreate/onStart/onResume</span></span>
<span class="line"><span>          ↓</span></span>
<span class="line"><span>        setContentView → View 测量布局绘制 → 首帧呈现</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h2 id="_10-监控与工具体系" tabindex="-1">10. 监控与工具体系 <a class="header-anchor" href="#_10-监控与工具体系" aria-label="Permalink to “10. 监控与工具体系”">​</a></h2><ul><li><strong>官方工具</strong>：<code>Android Studio Profiler</code>、<code>TraceView</code>、<code>Perfetto</code>、<code>adb shell am start -W</code>、<code>systrace</code>。</li><li><strong>日志指标</strong>：使用 <code>Logcat</code> 的 <code>ActivityTaskManager</code>、<code>ActivityManager</code> 标签获取调度信息。</li><li><strong>第三方方案</strong>：埋点统计（如 Firebase Performance）、<code>BlockCanary</code>、<code>Matrix</code> 监控阻塞。</li></ul><h2 id="_11-最佳实践清单" tabindex="-1">11. 最佳实践清单 <a class="header-anchor" href="#_11-最佳实践清单" aria-label="Permalink to “11. 最佳实践清单”">​</a></h2><ul><li>保持冷启动首帧 &lt; 2s，目标 700ms 以内。</li><li>避免在 Application <code>onCreate</code> 中初始化重量级 SDK（如网络、广告），采用懒加载或后台初始化。</li><li>使用 <code>SplashScreen API</code>（Android 12+）统一启动体验，结合过渡动画减少心理等待。</li><li>对关键路径建立自动化监控（CI 中通过 <code>macrobenchmark</code> 测量）并设定回归阈值。</li><li>定期审查任务栈与 Deep Link 入口，确保特殊场景（通知、ShareSheet）路径一致。</li></ul><h2 id="_12-扩展思考" tabindex="-1">12. 扩展思考 <a class="header-anchor" href="#_12-扩展思考" aria-label="Permalink to “12. 扩展思考”">​</a></h2><ul><li><strong>多进程应用</strong>：独立进程的 Service/Provider 会触发额外进程启动，需分离初始化逻辑。</li><li><strong>模块化架构</strong>：<code>Dynamic Feature</code> 模块延迟加载，降低冷启动体积。</li><li><strong>Compose UI</strong>：采用 <code>Jetpack Compose</code> 时关注首帧编译开销，结合 <code>remember</code>、<code>DerivedStateOf</code> 降低重组。</li><li><strong>未来趋势</strong>：App Startup 库与 Baseline Profiles 将成为启动优化标配；Android 15 引入 <code>Partial Reactivation</code> 以更高效恢复后台进程。</li></ul><hr><p>以上内容适用于主流 Android 8.0+ 系统版本，底层实现细节（如 ATMS/AMS 拆分）可能随版本微调，优化策略需结合实际硬件与业务场景验证。</p></div></div></main><footer class="VPDocFooter" data-v-7011f0d8 data-v-e257564d><!--[--><!--]--><div class="edit-info" data-v-e257564d><div class="edit-link" data-v-e257564d><a class="VPLink link vp-external-link-icon no-icon edit-link-button" href="https://github.com/yuan0x00/VitePress/blob/main/docs/android/语言与基础/Android应用启动流程.md" target="_blank" rel="noreferrer" data-v-e257564d><!--[--><span class="vpi-square-pen edit-link-icon" data-v-e257564d></span> Edit this page<!--]--></a></div><div class="last-updated" data-v-e257564d><p class="VPLastUpdated" data-v-e257564d data-v-3c637f39>最近更新: <time datetime="2025-11-22T17:53:20.000Z" data-v-3c637f39></time></p></div></div><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-e257564d><span class="visually-hidden" id="doc-footer-aria-label" data-v-e257564d>Pager</span><div class="pager" data-v-e257564d><a class="VPLink link pager-link prev" href="/android/%E8%AF%AD%E8%A8%80%E4%B8%8E%E5%9F%BA%E7%A1%80/Android%E5%BA%94%E7%94%A8%E6%9E%84%E5%BB%BA%E6%B5%81%E7%A8%8B" data-v-e257564d><!--[--><span class="desc" data-v-e257564d>上一篇</span><span class="title" data-v-e257564d>Android应用构建流程</span><!--]--></a></div><div class="pager" data-v-e257564d><a class="VPLink link pager-link next" href="/android/%E4%B8%BB%E6%B5%81%E5%BA%93%E5%8E%9F%E7%90%86/Bugly%E5%8E%9F%E7%90%86" data-v-e257564d><!--[--><span class="desc" data-v-e257564d>下一篇</span><span class="title" data-v-e257564d>Bugly原理</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!--]--></div></div>
    
    
  </body>
</html>