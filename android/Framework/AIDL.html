<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Blog</title>
    <meta name="description" content="A VitePress site">
    <meta name="generator" content="VitePress v2.0.0-alpha.15">
    <link rel="preload stylesheet" href="/assets/style.B2nb6MQ5.css" as="style">
    <link rel="preload stylesheet" href="/vp-icons.css" as="style">
    <script type="module" src="/assets/chunks/metadata.5b275abb.js"></script>
    <script type="module" src="/assets/app.BK8kU7vg.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/theme.CaCMkkGU.js">
    <link rel="modulepreload" href="/assets/chunks/framework.GtCa91sV.js">
    <link rel="modulepreload" href="/assets/android_Framework_AIDL.md.BvhlQjy8.lean.js">
    <link rel="icon" type="image/svg+xml" href="https://vitepress.dev/vitepress-logo-mini.svg">
    <link rel="icon" type="image/png" href="https://vitepress.dev/vitepress-logo-mini.png">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-1df9f90f><!--[--><!--]--><!--[--><span tabindex="-1" data-v-331ec75c></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-331ec75c>Skip to content</a><!--]--><!----><header class="VPNav" data-v-1df9f90f data-v-da52a441><div class="VPNavBar" data-v-da52a441 data-v-70946a35><div class="wrapper" data-v-70946a35><div class="container" data-v-70946a35><div class="title" data-v-70946a35><div class="VPNavBarTitle has-sidebar" data-v-70946a35 data-v-1e38c6bc><a class="title" href="/" data-v-1e38c6bc><!--[--><!--]--><!--[--><img class="VPImage logo" src="/android.svg" width="24" height="24" alt data-v-8426fc1a><!--]--><span data-v-1e38c6bc>Blog</span><!--[--><!--]--></a></div></div><div class="content" data-v-70946a35><div class="content-body" data-v-70946a35><!--[--><!--]--><div class="VPNavBarSearch search" data-v-70946a35><!--[--><!----><div id="local-search"><button type="button" aria-label="Search" aria-keyshortcuts="/ control+k meta+k" class="DocSearch DocSearch-Button"><span class="DocSearch-Button-Container"><span class="vpi-search DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key"></kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-70946a35 data-v-39714824><span id="main-nav-aria-label" class="visually-hidden" data-v-39714824> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/" tabindex="0" data-v-39714824 data-v-52a1d768><!--[--><span data-v-52a1d768>首页</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/android/" tabindex="0" data-v-39714824 data-v-52a1d768><!--[--><span data-v-52a1d768>Android</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/java/" tabindex="0" data-v-39714824 data-v-52a1d768><!--[--><span data-v-52a1d768>Java</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/kotlin/" tabindex="0" data-v-39714824 data-v-52a1d768><!--[--><span data-v-52a1d768>Kotlin</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-70946a35 data-v-6c893767><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-6c893767 data-v-5337faa4 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-5337faa4></span><span class="vpi-moon moon" data-v-5337faa4></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-70946a35 data-v-0394ad82 data-v-d07f11e6><!--[--><a class="VPSocialLink no-icon" href="https://github.com/yuan0x00" aria-label="github" target="_blank" rel="me noopener" data-v-d07f11e6 data-v-591a6b30><span class="vpi-social-github"></span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-70946a35 data-v-bf2fac68 data-v-42cb505d><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-42cb505d><span class="vpi-more-horizontal icon" data-v-42cb505d></span></button><div class="menu" data-v-42cb505d><div class="VPMenu" data-v-42cb505d data-v-25a6cce8><!----><!--[--><!--[--><!----><div class="group" data-v-bf2fac68><div class="item appearance" data-v-bf2fac68><p class="label" data-v-bf2fac68>深浅模式</p><div class="appearance-action" data-v-bf2fac68><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-bf2fac68 data-v-5337faa4 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-5337faa4></span><span class="vpi-moon moon" data-v-5337faa4></span><!--]--></span></span></button></div></div></div><div class="group" data-v-bf2fac68><div class="item social-links" data-v-bf2fac68><div class="VPSocialLinks social-links-list" data-v-bf2fac68 data-v-d07f11e6><!--[--><a class="VPSocialLink no-icon" href="https://github.com/yuan0x00" aria-label="github" target="_blank" rel="me noopener" data-v-d07f11e6 data-v-591a6b30><span class="vpi-social-github"></span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-70946a35 data-v-e5dd9c1c><span class="container" data-v-e5dd9c1c><span class="top" data-v-e5dd9c1c></span><span class="middle" data-v-e5dd9c1c></span><span class="bottom" data-v-e5dd9c1c></span></span></button></div></div></div></div><div class="divider" data-v-70946a35><div class="divider-line" data-v-70946a35></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-1df9f90f data-v-db738f89><div class="container" data-v-db738f89><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-db738f89><span class="vpi-align-left menu-icon" data-v-db738f89></span><span class="menu-text" data-v-db738f89>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-db738f89 data-v-0bf0e06f><button data-v-0bf0e06f>返回顶部</button><!----></div></div></div><aside class="VPSidebar" data-v-1df9f90f data-v-af661f50><div class="curtain" data-v-af661f50></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-af661f50><span class="visually-hidden" id="sidebar-aria-label" data-v-af661f50> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-8d50c081><section class="VPSidebarItem level-0 collapsible" data-v-8d50c081 data-v-d81de50c><div class="item" role="button" tabindex="0" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><h2 class="text" data-v-d81de50c>Android</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-d81de50c><span class="vpi-chevron-right caret-icon" data-v-d81de50c></span></div></div><div class="items" data-v-d81de50c><!--[--><div class="VPSidebarItem level-1 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/android/" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>概览</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-8d50c081><section class="VPSidebarItem level-0 collapsible" data-v-8d50c081 data-v-d81de50c><div class="item" role="button" tabindex="0" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><h2 class="text" data-v-d81de50c>面试</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-d81de50c><span class="vpi-chevron-right caret-icon" data-v-d81de50c></span></div></div><div class="items" data-v-d81de50c><!--[--><div class="VPSidebarItem level-1 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/android/%E9%9D%A2%E8%AF%95/%E6%A0%B8%E5%BF%83%E8%80%83%E7%82%B9" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>核心考点</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/android/%E9%9D%A2%E8%AF%95/%E9%9D%A2%E8%AF%95%E9%AB%98%E9%A2%91%E9%A2%98" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>面试高频题</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/android/%E9%9D%A2%E8%AF%95/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>设计模式</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/android/%E9%9D%A2%E8%AF%95/%E4%BA%8B%E4%BB%B6%E5%88%86%E5%8F%91%E6%9C%BA%E5%88%B6" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>事件分发机制</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/android/%E9%9D%A2%E8%AF%95/%E7%AE%97%E6%B3%95%E9%A2%98" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>算法题</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/android/%E9%9D%A2%E8%AF%95/Handler%E9%9D%A2%E8%AF%95%E9%A2%98" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>Handler面试题</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/android/%E9%9D%A2%E8%AF%95/View%E9%9D%A2%E8%AF%95%E9%A2%98" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>View面试题</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-8d50c081><section class="VPSidebarItem level-0 collapsible" data-v-8d50c081 data-v-d81de50c><div class="item" role="button" tabindex="0" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><h2 class="text" data-v-d81de50c>语言与基础</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-d81de50c><span class="vpi-chevron-right caret-icon" data-v-d81de50c></span></div></div><div class="items" data-v-d81de50c><!--[--><div class="VPSidebarItem level-1 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/android/%E8%AF%AD%E8%A8%80%E4%B8%8E%E5%9F%BA%E7%A1%80/App%E6%9E%84%E5%BB%BA%E6%B5%81%E7%A8%8B" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>App构建流程</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/android/%E8%AF%AD%E8%A8%80%E4%B8%8E%E5%9F%BA%E7%A1%80/App%E5%90%AF%E5%8A%A8%E6%B5%81%E7%A8%8B" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>App启动流程</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-8d50c081><section class="VPSidebarItem level-0 collapsible" data-v-8d50c081 data-v-d81de50c><div class="item" role="button" tabindex="0" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><h2 class="text" data-v-d81de50c>主流库原理</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-d81de50c><span class="vpi-chevron-right caret-icon" data-v-d81de50c></span></div></div><div class="items" data-v-d81de50c><!--[--><div class="VPSidebarItem level-1 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/android/%E4%B8%BB%E6%B5%81%E5%BA%93%E5%8E%9F%E7%90%86/Bugly%E5%8E%9F%E7%90%86" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>Bugly原理</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/android/%E4%B8%BB%E6%B5%81%E5%BA%93%E5%8E%9F%E7%90%86/Glide%E5%8E%9F%E7%90%86" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>Glide原理</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/android/%E4%B8%BB%E6%B5%81%E5%BA%93%E5%8E%9F%E7%90%86/LeakCanary%E5%8E%9F%E7%90%86" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>LeakCanary原理</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/android/%E4%B8%BB%E6%B5%81%E5%BA%93%E5%8E%9F%E7%90%86/OkHttp%E5%8E%9F%E7%90%86" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>OkHttp原理</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/android/%E4%B8%BB%E6%B5%81%E5%BA%93%E5%8E%9F%E7%90%86/Retrofit%E5%8E%9F%E7%90%86" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>Retrofit原理</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/android/%E4%B8%BB%E6%B5%81%E5%BA%93%E5%8E%9F%E7%90%86/RxJava%E5%8E%9F%E7%90%86" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>RxJava原理</p><!--]--></a><!----></div><!----></div><section class="VPSidebarItem level-1 collapsible" data-v-d81de50c data-v-d81de50c><div class="item" role="button" tabindex="0" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><h3 class="text" data-v-d81de50c>Jetpack</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-d81de50c><span class="vpi-chevron-right caret-icon" data-v-d81de50c></span></div></div><div class="items" data-v-d81de50c><!--[--><div class="VPSidebarItem level-2 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/android/%E4%B8%BB%E6%B5%81%E5%BA%93%E5%8E%9F%E7%90%86/Jetpack/ConstraintLayout%E5%8E%9F%E7%90%86" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>ConstraintLayout原理</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/android/%E4%B8%BB%E6%B5%81%E5%BA%93%E5%8E%9F%E7%90%86/Jetpack/Hilt%E5%8E%9F%E7%90%86" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>Hilt原理</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/android/%E4%B8%BB%E6%B5%81%E5%BA%93%E5%8E%9F%E7%90%86/Jetpack/Lifecycle%E5%8E%9F%E7%90%86" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>Lifecycle原理</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/android/%E4%B8%BB%E6%B5%81%E5%BA%93%E5%8E%9F%E7%90%86/Jetpack/LiveData%E5%8E%9F%E7%90%86" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>LiveData原理</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/android/%E4%B8%BB%E6%B5%81%E5%BA%93%E5%8E%9F%E7%90%86/Jetpack/RecyclerView%E5%8E%9F%E7%90%86" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>RecyclerView原理</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/android/%E4%B8%BB%E6%B5%81%E5%BA%93%E5%8E%9F%E7%90%86/Jetpack/ViewModel%E5%8E%9F%E7%90%86" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>ViewModel原理</p><!--]--></a><!----></div><!----></div><!--]--></div></section><!--]--></div></section></div><div class="no-transition group" data-v-8d50c081><section class="VPSidebarItem level-0 collapsible" data-v-8d50c081 data-v-d81de50c><div class="item" role="button" tabindex="0" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><h2 class="text" data-v-d81de50c>组件与机制</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-d81de50c><span class="vpi-chevron-right caret-icon" data-v-d81de50c></span></div></div><div class="items" data-v-d81de50c><!--[--><div class="VPSidebarItem level-1 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/android/%E7%BB%84%E4%BB%B6%E4%B8%8E%E6%9C%BA%E5%88%B6/Activity%E8%AF%A6%E8%A7%A3" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>Activity详解</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/android/%E7%BB%84%E4%BB%B6%E4%B8%8E%E6%9C%BA%E5%88%B6/Fragment%E8%AF%A6%E8%A7%A3" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>Fragment详解</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/android/%E7%BB%84%E4%BB%B6%E4%B8%8E%E6%9C%BA%E5%88%B6/Service%E8%AF%A6%E8%A7%A3" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>Service详解</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/android/%E7%BB%84%E4%BB%B6%E4%B8%8E%E6%9C%BA%E5%88%B6/View%E8%AF%A6%E8%A7%A3" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>View详解</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/android/%E7%BB%84%E4%BB%B6%E4%B8%8E%E6%9C%BA%E5%88%B6/Window%E8%AF%A6%E8%A7%A3" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>Window详解</p><!--]--></a><!----></div><!----></div><section class="VPSidebarItem level-1 collapsible" data-v-d81de50c data-v-d81de50c><div class="item" role="button" tabindex="0" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><h3 class="text" data-v-d81de50c>机制</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-d81de50c><span class="vpi-chevron-right caret-icon" data-v-d81de50c></span></div></div><div class="items" data-v-d81de50c><!--[--><div class="VPSidebarItem level-2 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/android/%E7%BB%84%E4%BB%B6%E4%B8%8E%E6%9C%BA%E5%88%B6/%E6%9C%BA%E5%88%B6/Binder%E6%9C%BA%E5%88%B6%E8%AF%A6%E8%A7%A3" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>Binder机制详解</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/android/%E7%BB%84%E4%BB%B6%E4%B8%8E%E6%9C%BA%E5%88%B6/%E6%9C%BA%E5%88%B6/Handler%E6%9C%BA%E5%88%B6%E8%AF%A6%E8%A7%A3" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>Handler机制详解</p><!--]--></a><!----></div><!----></div><!--]--></div></section><!--]--></div></section></div><div class="no-transition group" data-v-8d50c081><section class="VPSidebarItem level-0 collapsible has-active" data-v-8d50c081 data-v-d81de50c><div class="item" role="button" tabindex="0" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><h2 class="text" data-v-d81de50c>Framework</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-d81de50c><span class="vpi-chevron-right caret-icon" data-v-d81de50c></span></div></div><div class="items" data-v-d81de50c><!--[--><div class="VPSidebarItem level-1 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/android/Framework/AIDL" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>AIDL</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/android/Framework/Binder" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>Binder</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/android/Framework/Handler" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>Handler</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/android/Framework/View" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>View</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-1df9f90f data-v-c87f25bf><div class="VPDoc has-sidebar has-aside" data-v-c87f25bf data-v-7011f0d8><!--[--><!--]--><div class="container" data-v-7011f0d8><div class="aside" data-v-7011f0d8><div class="aside-curtain" data-v-7011f0d8></div><div class="aside-container" data-v-7011f0d8><div class="aside-content" data-v-7011f0d8><div class="VPDocAside" data-v-7011f0d8 data-v-3f215769><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-3f215769 data-v-60d5052e><div class="content" data-v-60d5052e><div class="outline-marker" data-v-60d5052e></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-60d5052e>目录</div><ul class="VPDocOutlineItem root" data-v-60d5052e data-v-1ce71065><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-3f215769></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-7011f0d8><div class="content-container" data-v-7011f0d8><!--[--><!--]--><main class="main" data-v-7011f0d8><div style="position:relative;" class="vp-doc _android_Framework_AIDL" data-v-7011f0d8><div><p>我们来系统地梳理 AIDL 的相关知识点。</p><hr><h3 id="关于-aidl-android-跨进程通信的桥梁" tabindex="-1">关于 AIDL：Android 跨进程通信的桥梁 <a class="header-anchor" href="#关于-aidl-android-跨进程通信的桥梁" aria-label="Permalink to “关于 AIDL：Android 跨进程通信的桥梁”">​</a></h3><p>AIDL 是 Android 开发者实现跨进程通信最直接、最常用的工具。它封装了 Binder 的复杂细节，让开发者能够以类似本地方法调用的方式进行进程间交互。理解 AIDL 是理解 Android 组件间通信的基础，也是中高级面试的必考项。</p><p>下面我将为你系统地梳理关于 AIDL 所能考察的所有知识点，从使用到原理，全面覆盖。</p><hr><h3 id="一、核心概念与设计初衷-why-what-aidl" tabindex="-1">一、核心概念与设计初衷 (Why &amp; What AIDL?) <a class="header-anchor" href="#一、核心概念与设计初衷-why-what-aidl" aria-label="Permalink to “一、核心概念与设计初衷 (Why &amp; What AIDL?)”">​</a></h3><p>这部分考察对 AIDL 的宏观理解和使用场景。</p><ol><li><p><strong>为什么需要 AIDL？</strong></p><ul><li><strong>进程隔离</strong>：Android 应用沙盒模型决定了默认情况下进程间内存不共享。</li><li><strong>系统服务调用</strong>：应用需要调用系统服务（如 TelephonyManager、AudioService）的能力，这些服务运行在 <code>system_server</code> 进程。</li><li><strong>应用间能力共享</strong>：一个应用希望将自身的能力（例如，音乐播放、支付服务）暴露给其他应用使用。</li><li><strong>替代方案不足</strong>：<code>Intent</code> / <code>BroadcastReceiver</code> 适用于简单、松耦合的通信，但效率低、不支持复杂数据结构和同步调用。<code>Messenger</code> 基于 AIDL 实现，但它是串行的，不适用于高并发场景。</li></ul></li><li><p><strong>AIDL 是什么？</strong></p><ul><li><strong>全称</strong>：Android Interface Definition Language。</li><li><strong>本质</strong>：一种<strong>接口定义语言</strong>，用于约定 Client 和 Server 之间的通信契约（即可以调用哪些方法，传递哪些参数）。</li><li><strong>作用</strong>：Android SDK 构建工具会根据你的 <code>.aidl</code> 文件自动生成对应的 Java 代码，这些代码封装了底层的 Binder IPC 细节，使开发者可以专注于业务逻辑。</li></ul></li><li><p><strong>AIDL 的适用场景</strong></p><ul><li>需要处理<strong>多线程并发请求</strong>的 Service。</li><li>需要向<strong>其他应用</strong>共享功能。</li><li>需要将大量时间运行在<strong>独立进程</strong>中（如“:remote”进程）以提升应用性能或稳定性。</li></ul></li></ol><hr><h3 id="二、aidl-的使用与语法-how-to-use-aidl" tabindex="-1">二、AIDL 的使用与语法 (How to Use AIDL?) <a class="header-anchor" href="#二、aidl-的使用与语法-how-to-use-aidl" aria-label="Permalink to “二、AIDL 的使用与语法 (How to Use AIDL?)”">​</a></h3><p>这是基础，需要掌握如何编写和使用 AIDL。</p><ol><li><p><strong>AIDL 支持的数据类型</strong></p><ul><li><strong>基本数据类型</strong>：<code>int</code>, <code>long</code>, <code>char</code>, <code>boolean</code>, <code>double</code>, <code>float</code>, <code>byte</code>。</li><li><strong>String</strong> 和 <code>CharSequence</code>。</li><li><strong>List</strong>：只支持 <code>ArrayList</code>，且其中的元素必须是 AIDL 支持的类型或被声明的 Parcelable。</li><li><strong>Map</strong>：只支持 <code>HashMap</code>，且 Key/Value 必须是 AIDL 支持的类型。</li><li><strong>实现了 Parcelable 接口的对象</strong>。</li><li><strong>其他 AIDL 接口</strong>。</li></ul></li><li><p><strong>AIDL 文件语法</strong></p><ul><li><strong>包名声明</strong>：<code>package com.example.app;</code></li><li><strong>导包</strong>：即使在同一包内，所有自定义的 <code>Parcelable</code> 和 <code>AIDL</code> 接口都需要显式导入。<code>import com.example.app.MyParcelable;</code></li><li><strong>接口声明</strong>：使用 <code>interface</code> 关键字。</li><li><strong>方法声明</strong>：可以带有参数和返回值。所有非基本类型的参数都必须指定方向标签：<code>in</code>, <code>out</code>, <code>inout</code>。 <ul><li><code>in</code>：数据从 Client 流向 Server，Server 收到的对象修改不会影响 Client 端。</li><li><code>out</code>：数据从 Server 流回 Client，Client 传入的对象内容不被关心，Server 会创建一个新对象并填充数据传回。</li><li><code>inout</code>：双向流通。</li></ul></li></ul></li><li><p><strong>一个完整的 AIDL 使用流程</strong></p><ol><li><strong>创建 <code>.aidl</code> 文件</strong>：在 <code>src/main/aidl/</code> 目录下定义接口。</li><li><strong>实现 Parcelable</strong>：如果传输自定义对象，需实现 <code>Parcelable</code> 接口，并为其创建对应的 <code>.aidl</code> 文件（如 <code>parcelable MyData;</code>）。</li><li><strong>Build Project</strong>：Android Studio 会自动在 <code>build/generated/</code> 目录下生成对应的 Java 接口文件。</li><li><strong>Server 端</strong>：创建一个 Service，在其 <code>onBind</code> 方法中返回一个 <code>Stub</code> 的实现类。</li><li><strong>Client 端</strong>：通过 <code>bindService</code> 连接，在 <code>onServiceConnected</code> 回调中，使用 <code>Stub.asInterface(service)</code> 将返回的 <code>IBinder</code> 对象转换为 AIDL 接口进行调用。</li></ol></li></ol><hr><h3 id="三、aidl-的生成代码与-binder-原理-the-magic-behind-aidl" tabindex="-1">三、AIDL 的生成代码与 Binder 原理 (The Magic Behind AIDL) <a class="header-anchor" href="#三、aidl-的生成代码与-binder-原理-the-magic-behind-aidl" aria-label="Permalink to “三、AIDL 的生成代码与 Binder 原理 (The Magic Behind AIDL)”">​</a></h3><p>这是面试的核心，需要理解 AIDL 如何与 Binder 机制关联。</p><ol><li><p><strong>AIDL 生成的 Java 类结构</strong> 工具会为一个 AIDL 接口（如 <code>IMyService.aidl</code>）生成一个核心的 Java 文件，包含以下部分：</p><ul><li><strong>主接口 (IMyService)</strong>：继承自 <code>android.os.IInterface</code>。它定义了 AIDL 文件中声明的方法。</li><li><strong>抽象内部类 Stub</strong>：继承自 <code>android.os.Binder</code> 并实现了 <code>IMyService</code> 接口。 <ul><li><strong>角色</strong>：它是 Binder <strong>本地对象</strong> 的基类。Server 端需要继承这个 Stub 并实现具体的业务方法。</li><li><strong>关键方法</strong>： <ul><li><code>asInterface(IBinder obj)</code>：将 Binder 代理对象转换为 AIDL 接口。如果 Client 和 Server 在同一进程，则直接返回 Stub 本身（本地调用）；否则，返回一个封装好的 <code>Proxy</code> 对象。</li><li><code>onTransact(int code, Parcel data, Parcel reply, int flags)</code>：运行在 <strong>Server 端的 Binder 线程池</strong>中。它负责解析 Client 传来的 <code>code</code>（方法标识）和 <code>data</code>（参数），调用相应的本地方法，并将结果写入 <code>reply</code>。</li></ul></li></ul></li><li><strong>静态内部类 Proxy</strong>：实现了 <code>IMyService</code> 接口。 <ul><li><strong>角色</strong>：它是 Binder <strong>代理对象</strong>。Client 端实际持有的是这个对象。</li><li><strong>工作流程</strong>： <ol><li>将方法标识（<code>code</code>）和所有参数序列化到 <code>Parcel</code> 对象 <code>_data</code> 中。</li><li>通过 <code>mRemote.transact()</code> 发起 IPC 调用，将 <code>_data</code> 发送出去，并当前线程挂起。</li><li>等待 Server 端执行完毕，结果被反序列化从 <code>_reply</code> 中读取。</li><li>返回结果给 Client 调用方。</li></ol></li></ul></li></ul></li><li><p><strong>AIDL 与 Binder 四要素的对应关系</strong></p><ul><li><strong>Binder 驱动</strong>：<code>mRemote.transact()</code> 和 <code>onTransact()</code> 的底层通信通道。</li><li><strong>Server</strong>：实现了 <code>Stub</code> 的 Service。</li><li><strong>Client</strong>：持有 <code>Proxy</code> 对象的组件。</li><li><strong>ServiceManager</strong>：在系统服务场景下，Server 会向 ServiceManager 注册。在应用自定义 Service 中，通常通过 <code>Intent</code> 的 Action 来隐式定位。</li></ul></li><li><p><strong>一次 AIDL 调用的完整流程</strong></p><ol><li><strong>Client</strong>：调用 <code>proxy.someMethod(args)</code>。</li><li><strong>Proxy</strong>：打包数据，调用 <code>mRemote.transact(TRANSACTION_someMethod, data, reply, 0)</code>。</li><li><strong>Binder 驱动</strong>：接收请求，找到目标 Server 进程和线程，传递 Transaction。</li><li><strong>Server (Binder Thread Pool)</strong>：<code>Stub.onTransact()</code> 被调用，根据 <code>code</code> 解包数据，调用真正的 <code>someMethod</code> 实现。</li><li><strong>Server</strong>：方法执行，将结果写入 <code>reply</code>。</li><li><strong>Binder 驱动</strong>：将结果数据拷贝回 Client 进程。</li><li><strong>Client</strong>：<code>transact()</code> 方法返回，<code>Proxy</code> 从 <code>reply</code> 中解包结果，返回给调用方。</li></ol></li></ol><hr><h3 id="四、深入原理与难点-advanced-topics" tabindex="-1">四、深入原理与难点 (Advanced Topics) <a class="header-anchor" href="#四、深入原理与难点-advanced-topics" aria-label="Permalink to “四、深入原理与难点 (Advanced Topics)”">​</a></h3><p>这部分能体现你是否真正理解 AIDL 的底层机制和注意事项。</p><ol><li><p><strong>“一次拷贝”在 AIDL 中的体现</strong></p><ul><li>AIDL 使用 <code>Parcel</code> 进行序列化，而 <code>Parcel</code> 的数据最终就是写入到由 <code>mmap</code> 创建的那块<strong>共享内核缓冲区</strong>中。因此，AIDL 天然享受 Binder 一次拷贝的性能优势。</li></ul></li><li><p><strong>线程模型与并发安全</strong></p><ul><li><strong>Client 端</strong>：IPC 调用是同步的。如果你在 UI 线程调用，会阻塞 UI。<strong>必须开子线程</strong>。</li><li><strong>Server 端</strong>：所有客户端的请求都由一个<strong>固定的 Binder 线程池</strong>（默认最大16个线程）处理。这意味着你的 <code>Stub</code> 实现必须是<strong>线程安全</strong>的。</li><li><strong>Callback</strong>：如果 Server 需要主动调用 Client（通过注册 <code>Listener</code>/<code>Callback</code>），那么在 Client 端，这个回调方法是执行在 Client 的 <strong>Binder 线程池</strong> 中，而非 UI 线程。<strong>需要手动切换到 UI 线程</strong>才能更新界面。</li></ul></li><li><p><strong>参数的方向标签 (<code>in</code>, <code>out</code>, <code>inout</code>)</strong></p><ul><li>这不仅仅是语义，它直接影响 <code>Parcel</code> 的序列化和反序列化逻辑。</li><li><code>in</code> 参数：只调用 <code>writeToParcel</code>。</li><li><code>out</code> 参数：不关心初始内容，会先创建一个空对象，然后调用 <code>readFromParcel</code>。</li><li><code>inout</code> 参数：先 <code>writeToParcel</code>，Server 端再 <code>readFromParcel</code>（可能会覆盖原有数据）。</li><li><strong>最佳实践</strong>：出于性能考虑，<strong>优先使用 <code>in</code> 参数</strong>，除非确实需要从 Server 端返回数据。</li></ul></li><li><p><strong>异常处理与死亡通知</strong></p><ul><li><strong>异常传递</strong>：Server 端方法抛出的异常会被序列化，传递到 Client 端并重新抛出。Client 代码需要用 <code>try-catch</code> 捕获 <code>RemoteException</code>。</li><li><strong>死亡通知</strong>：Client 可以通过 <code>linkToDeath</code> 向 <code>Proxy</code> 对象注册一个 <code>DeathRecipient</code>，以便在 Server 进程意外终止时得到通知，进行资源清理和重连。</li></ul></li></ol><hr><h3 id="五、面试经典问题" tabindex="-1">五、面试经典问题 <a class="header-anchor" href="#五、面试经典问题" aria-label="Permalink to “五、面试经典问题”">​</a></h3><ol><li><p><strong>AIDL 是什么？它解决了什么问题？</strong></p><ul><li>答：AIDL 是 Android 接口定义语言，用于定义跨进程通信的接口。它解决了在进程隔离环境下，进行高性能、结构化、同步的 RPC 调用的问题。</li></ul></li><li><p><strong>描述一下 AIDL 生成的 Stub 和 Proxy 类各自的作用。</strong></p><ul><li>答：Stub 是服务端的基类，负责接收请求、解包参数、调用实际方法并返回结果。Proxy 是客户端的代理，负责打包参数、发起 IPC 调用并解包结果。它们共同协作，将对远程方法的调用伪装成本地调用。</li></ul></li><li><p><strong>AIDL 支持哪些数据类型？为什么自定义对象需要实现 Parcelable？</strong></p><ul><li>答：支持基本类型、String、List、Map、其他 AIDL 接口和 Parcelable 对象。Binder 传输数据需要高效地序列化/反序列化，Parcelable 是 Android 为内存读写设计的高效序列化协议，专为 IPC 等场景优化。</li></ul></li><li><p><strong>AIDL 中的 <code>in</code>, <code>out</code>, <code>inout</code> 标签有什么区别？</strong></p><ul><li>答：它们定义了参数的流向。<code>in</code> 表示数据从 Client 到 Server；<code>out</code> 表示 Server 会创建/修改对象并传回给 Client；<code>inout</code> 是双向的。这直接影响 Parcel 的读写顺序。</li></ul></li><li><p><strong>Client 调用 AIDL 方法时，线程会阻塞吗？Server 端的方法在哪个线程执行？</strong></p><ul><li>答：Client 端调用会阻塞当前线程，因此必须在子线程中进行。Server 端的方法执行在 Binder 线程池中，因此 Stub 的实现必须是线程安全的。</li></ul></li><li><p><strong>如果 Server 端需要回调 Client 端，该如何设计？需要注意什么？</strong></p><ul><li>答：需要定义另一个 AIDL 回调接口，由 Client 实现并通过 AIDL 方法注册给 Server。Server 持有这个回调接口的 Proxy 并调用它。<strong>注意</strong>：Client 端的回调方法执行在 Binder 线程，需要切到主线程才能更新 UI。</li></ul></li></ol><h3 id="总结" tabindex="-1">总结 <a class="header-anchor" href="#总结" aria-label="Permalink to “总结”">​</a></h3><p>要应对关于 AIDL 的所有考察，你需要：</p><ol><li><strong>能说清用途</strong>：理解 AIDL 的适用场景和优势。</li><li><strong>会动手使用</strong>：掌握编写 AIDL 文件、实现 Parcelable、创建 Service 和 Client 的完整流程。</li><li><strong>能解析源码</strong>：深刻理解 AIDL 生成的 <code>Stub</code> 和 <code>Proxy</code> 类的代码结构和协作流程，并能与 Binder 机制联系起来。</li><li><strong>能处理细节</strong>：清楚方向标签的作用、线程模型、异常处理和死亡通知。</li><li><strong>能辨析对比</strong>：能说出 AIDL 与 <code>Intent</code>/<code>Messenger</code> 等方案的异同和选型依据。</li></ol><p>掌握了这些，你就能对 AIDL 相关的问题应对自如。</p></div></div></main><footer class="VPDocFooter" data-v-7011f0d8 data-v-e257564d><!--[--><!--]--><div class="edit-info" data-v-e257564d><div class="edit-link" data-v-e257564d><a class="VPLink link vp-external-link-icon no-icon edit-link-button" href="https://github.com/yuan0x00/VitePress/blob/main/docs/android/Framework/AIDL.md" target="_blank" rel="noreferrer" data-v-e257564d><!--[--><span class="vpi-square-pen edit-link-icon" data-v-e257564d></span> Edit this page<!--]--></a></div><div class="last-updated" data-v-e257564d><p class="VPLastUpdated" data-v-e257564d data-v-3c637f39>最近更新: <time datetime="2025-11-27T08:14:37.000Z" data-v-3c637f39></time></p></div></div><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-e257564d><span class="visually-hidden" id="doc-footer-aria-label" data-v-e257564d>Pager</span><div class="pager" data-v-e257564d><a class="VPLink link pager-link prev" href="/android/%E7%BB%84%E4%BB%B6%E4%B8%8E%E6%9C%BA%E5%88%B6/%E6%9C%BA%E5%88%B6/Handler%E6%9C%BA%E5%88%B6%E8%AF%A6%E8%A7%A3" data-v-e257564d><!--[--><span class="desc" data-v-e257564d>上一篇</span><span class="title" data-v-e257564d>Handler机制详解</span><!--]--></a></div><div class="pager" data-v-e257564d><a class="VPLink link pager-link next" href="/android/Framework/Binder" data-v-e257564d><!--[--><span class="desc" data-v-e257564d>下一篇</span><span class="title" data-v-e257564d>Binder</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!--]--></div></div>
    
    
  </body>
</html>