<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Android é«˜çº§å¼€å‘é¢è¯•å¸¸è€ƒé¢˜ | Blog</title>
    <meta name="description" content="A VitePress site">
    <meta name="generator" content="VitePress v2.0.0-alpha.12">
    <link rel="preload stylesheet" href="/assets/style.lcwUUJCL.css" as="style">
    <link rel="preload stylesheet" href="/vp-icons.css" as="style">
    <script type="module" src="/assets/chunks/metadata.69592084.js"></script>
    <script type="module" src="/assets/app.CtwxS5dU.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/theme.BnXDAH3V.js">
    <link rel="modulepreload" href="/assets/chunks/framework.BiF827kf.js">
    <link rel="modulepreload" href="/assets/android_3é¢è¯•_1å¸¸è€ƒé¢˜.md.BlBLNo9C.lean.js">
    <link rel="icon" type="image/svg+xml" href="https://vitepress.dev/vitepress-logo-mini.svg">
    <link rel="icon" type="image/png" href="https://vitepress.dev/vitepress-logo-mini.png">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body><!--teleport start anchor--><!----><!--teleport anchor-->
    <div id="app"><div class="Layout" data-v-1df9f90f><!--[--><!--]--><!--[--><span tabindex="-1" data-v-0b0ada53></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-0b0ada53>Skip to content</a><!--]--><!----><header class="VPNav" data-v-1df9f90f data-v-9f75dce3><div class="VPNavBar" data-v-9f75dce3 data-v-2a96a3d0><div class="wrapper" data-v-2a96a3d0><div class="container" data-v-2a96a3d0><div class="title" data-v-2a96a3d0><div class="VPNavBarTitle has-sidebar" data-v-2a96a3d0 data-v-1e38c6bc><a class="title" href="/" data-v-1e38c6bc><!--[--><!--]--><!--[--><img class="VPImage logo" src="/android.svg" width="24" height="24" alt data-v-8426fc1a><!--]--><span data-v-1e38c6bc>Blog</span><!--[--><!--]--></a></div></div><div class="content" data-v-2a96a3d0><div class="content-body" data-v-2a96a3d0><!--[--><!--]--><div class="VPNavBarSearch search" data-v-2a96a3d0><!--[--><!----><div id="local-search"><button type="button" aria-label="Search" aria-keyshortcuts="/ control+k meta+k" class="DocSearch DocSearch-Button"><span class="DocSearch-Button-Container"><span class="vpi-search DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key"></kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-2a96a3d0 data-v-39714824><span id="main-nav-aria-label" class="visually-hidden" data-v-39714824> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/" tabindex="0" data-v-39714824 data-v-e56f3d57><!--[--><span data-v-e56f3d57>é¦–é¡µ</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/android/" tabindex="0" data-v-39714824 data-v-e56f3d57><!--[--><span data-v-e56f3d57>Android</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/kotlin/" tabindex="0" data-v-39714824 data-v-e56f3d57><!--[--><span data-v-e56f3d57>Kotlin</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-2a96a3d0 data-v-6c893767><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-6c893767 data-v-5337faa4 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-5337faa4></span><span class="vpi-moon moon" data-v-5337faa4></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-2a96a3d0 data-v-0394ad82 data-v-d07f11e6><!--[--><a class="VPSocialLink no-icon" href="https://github.com/yuan0x00" aria-label="github" target="_blank" rel="me noopener" data-v-d07f11e6 data-v-591a6b30><span class="vpi-social-github"></span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-2a96a3d0 data-v-bb2aa2f0 data-v-42cb505d><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-42cb505d><span class="vpi-more-horizontal icon" data-v-42cb505d></span></button><div class="menu" data-v-42cb505d><div class="VPMenu" data-v-42cb505d data-v-25a6cce8><!----><!--[--><!--[--><!----><div class="group" data-v-bb2aa2f0><div class="item appearance" data-v-bb2aa2f0><p class="label" data-v-bb2aa2f0>æ·±æµ…æ¨¡å¼</p><div class="appearance-action" data-v-bb2aa2f0><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-bb2aa2f0 data-v-5337faa4 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-5337faa4></span><span class="vpi-moon moon" data-v-5337faa4></span><!--]--></span></span></button></div></div></div><div class="group" data-v-bb2aa2f0><div class="item social-links" data-v-bb2aa2f0><div class="VPSocialLinks social-links-list" data-v-bb2aa2f0 data-v-d07f11e6><!--[--><a class="VPSocialLink no-icon" href="https://github.com/yuan0x00" aria-label="github" target="_blank" rel="me noopener" data-v-d07f11e6 data-v-591a6b30><span class="vpi-social-github"></span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-2a96a3d0 data-v-e5dd9c1c><span class="container" data-v-e5dd9c1c><span class="top" data-v-e5dd9c1c></span><span class="middle" data-v-e5dd9c1c></span><span class="bottom" data-v-e5dd9c1c></span></span></button></div></div></div></div><div class="divider" data-v-2a96a3d0><div class="divider-line" data-v-2a96a3d0></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-1df9f90f data-v-8acdfeb5><div class="container" data-v-8acdfeb5><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-8acdfeb5><span class="vpi-align-left menu-icon" data-v-8acdfeb5></span><span class="menu-text" data-v-8acdfeb5>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-8acdfeb5 data-v-0bf0e06f><button data-v-0bf0e06f>è¿”å›é¡¶éƒ¨</button><!----></div></div></div><aside class="VPSidebar" data-v-1df9f90f data-v-e7c6e512><div class="curtain" data-v-e7c6e512></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-e7c6e512><span class="visually-hidden" id="sidebar-aria-label" data-v-e7c6e512> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-8d50c081><section class="VPSidebarItem level-0 collapsible" data-v-8d50c081 data-v-d81de50c><div class="item" role="button" tabindex="0" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><h2 class="text" data-v-d81de50c>Android</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-d81de50c><span class="vpi-chevron-right caret-icon" data-v-d81de50c></span></div></div><div class="items" data-v-d81de50c><!--[--><div class="VPSidebarItem level-1 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/android/" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>æ¦‚è§ˆ</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-8d50c081><section class="VPSidebarItem level-0 collapsible" data-v-8d50c081 data-v-d81de50c><div class="item" role="button" tabindex="0" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><h2 class="text" data-v-d81de50c>0è¯­è¨€ä¸åŸºç¡€</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-d81de50c><span class="vpi-chevron-right caret-icon" data-v-d81de50c></span></div></div><div class="items" data-v-d81de50c><!--[--><div class="VPSidebarItem level-1 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/android/0%E8%AF%AD%E8%A8%80%E4%B8%8E%E5%9F%BA%E7%A1%80/Android%E5%BA%94%E7%94%A8%E6%9E%84%E5%BB%BA%E6%B5%81%E7%A8%8B" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>Androidåº”ç”¨æ„å»ºæµç¨‹</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/android/0%E8%AF%AD%E8%A8%80%E4%B8%8E%E5%9F%BA%E7%A1%80/Android%E5%BA%94%E7%94%A8%E5%90%AF%E5%8A%A8%E6%B5%81%E7%A8%8B" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>Androidåº”ç”¨å¯åŠ¨æµç¨‹</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/android/0%E8%AF%AD%E8%A8%80%E4%B8%8E%E5%9F%BA%E7%A1%80/Java%20Android%E7%9F%A5%E8%AF%86%E4%BD%93%E7%B3%BB" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>Java AndroidçŸ¥è¯†ä½“ç³»</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/android/0%E8%AF%AD%E8%A8%80%E4%B8%8E%E5%9F%BA%E7%A1%80/Jvm%E5%AF%B9%E6%AF%94Art" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>Jvmå¯¹æ¯”Art</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-8d50c081><section class="VPSidebarItem level-0 collapsible" data-v-8d50c081 data-v-d81de50c><div class="item" role="button" tabindex="0" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><h2 class="text" data-v-d81de50c>1ç»„ä»¶ä¸æœºåˆ¶</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-d81de50c><span class="vpi-chevron-right caret-icon" data-v-d81de50c></span></div></div><div class="items" data-v-d81de50c><!--[--><div class="VPSidebarItem level-1 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/android/1%E7%BB%84%E4%BB%B6%E4%B8%8E%E6%9C%BA%E5%88%B6/Binder%E6%9C%BA%E5%88%B6%E8%AF%A6%E8%A7%A3" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>Binderæœºåˆ¶è¯¦è§£</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/android/1%E7%BB%84%E4%BB%B6%E4%B8%8E%E6%9C%BA%E5%88%B6/Handler%E6%9C%BA%E5%88%B6%E8%AF%A6%E8%A7%A3" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>Handleræœºåˆ¶è¯¦è§£</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/android/1%E7%BB%84%E4%BB%B6%E4%B8%8E%E6%9C%BA%E5%88%B6/View%E8%AF%A6%E8%A7%A3" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>Viewè¯¦è§£</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/android/1%E7%BB%84%E4%BB%B6%E4%B8%8E%E6%9C%BA%E5%88%B6/Window%E8%AF%A6%E8%A7%A3" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>Windowè¯¦è§£</p><!--]--></a><!----></div><!----></div><section class="VPSidebarItem level-1 collapsible" data-v-d81de50c data-v-d81de50c><div class="item" role="button" tabindex="0" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><h3 class="text" data-v-d81de50c>åº”ç”¨ç»„ä»¶</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-d81de50c><span class="vpi-chevron-right caret-icon" data-v-d81de50c></span></div></div><div class="items" data-v-d81de50c><!--[--><div class="VPSidebarItem level-2 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/android/1%E7%BB%84%E4%BB%B6%E4%B8%8E%E6%9C%BA%E5%88%B6/%E5%BA%94%E7%94%A8%E7%BB%84%E4%BB%B6/Activity%E8%AF%A6%E8%A7%A3" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>Activityè¯¦è§£</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/android/1%E7%BB%84%E4%BB%B6%E4%B8%8E%E6%9C%BA%E5%88%B6/%E5%BA%94%E7%94%A8%E7%BB%84%E4%BB%B6/BroadcastReceiver%E8%AF%A6%E8%A7%A3" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>BroadcastReceiverè¯¦è§£</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/android/1%E7%BB%84%E4%BB%B6%E4%B8%8E%E6%9C%BA%E5%88%B6/%E5%BA%94%E7%94%A8%E7%BB%84%E4%BB%B6/ContentProvider%E8%AF%A6%E8%A7%A3" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>ContentProviderè¯¦è§£</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/android/1%E7%BB%84%E4%BB%B6%E4%B8%8E%E6%9C%BA%E5%88%B6/%E5%BA%94%E7%94%A8%E7%BB%84%E4%BB%B6/Fragment%E8%AF%A6%E8%A7%A3" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>Fragmentè¯¦è§£</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/android/1%E7%BB%84%E4%BB%B6%E4%B8%8E%E6%9C%BA%E5%88%B6/%E5%BA%94%E7%94%A8%E7%BB%84%E4%BB%B6/Service%E8%AF%A6%E8%A7%A3" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>Serviceè¯¦è§£</p><!--]--></a><!----></div><!----></div><!--]--></div></section><!--]--></div></section></div><div class="no-transition group" data-v-8d50c081><section class="VPSidebarItem level-0 collapsible" data-v-8d50c081 data-v-d81de50c><div class="item" role="button" tabindex="0" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><h2 class="text" data-v-d81de50c>2ä¸»æµåº“æºç </h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-d81de50c><span class="vpi-chevron-right caret-icon" data-v-d81de50c></span></div></div><div class="items" data-v-d81de50c><!--[--><div class="VPSidebarItem level-1 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/android/2%E4%B8%BB%E6%B5%81%E5%BA%93%E6%BA%90%E7%A0%81/Glide%E5%8E%9F%E7%90%86%E6%BA%90%E7%A0%81" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>GlideåŸç†æºç </p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/android/2%E4%B8%BB%E6%B5%81%E5%BA%93%E6%BA%90%E7%A0%81/OkHttp%E5%8E%9F%E7%90%86%E6%BA%90%E7%A0%81" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>OkHttpåŸç†æºç </p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/android/2%E4%B8%BB%E6%B5%81%E5%BA%93%E6%BA%90%E7%A0%81/Retrofit%E5%8E%9F%E7%90%86%E6%BA%90%E7%A0%81" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>RetrofitåŸç†æºç </p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/android/2%E4%B8%BB%E6%B5%81%E5%BA%93%E6%BA%90%E7%A0%81/RxJava%E5%8E%9F%E7%90%86%E6%BA%90%E7%A0%81" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>RxJavaåŸç†æºç </p><!--]--></a><!----></div><!----></div><section class="VPSidebarItem level-1 collapsible" data-v-d81de50c data-v-d81de50c><div class="item" role="button" tabindex="0" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><h3 class="text" data-v-d81de50c>Jetpack</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-d81de50c><span class="vpi-chevron-right caret-icon" data-v-d81de50c></span></div></div><div class="items" data-v-d81de50c><!--[--><div class="VPSidebarItem level-2 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/android/2%E4%B8%BB%E6%B5%81%E5%BA%93%E6%BA%90%E7%A0%81/Jetpack/ConstraintLayout%E5%8E%9F%E7%90%86%E6%BA%90%E7%A0%81" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>ConstraintLayoutåŸç†æºç </p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/android/2%E4%B8%BB%E6%B5%81%E5%BA%93%E6%BA%90%E7%A0%81/Jetpack/Hilt%E5%8E%9F%E7%90%86%E6%BA%90%E7%A0%81" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>HiltåŸç†æºç </p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/android/2%E4%B8%BB%E6%B5%81%E5%BA%93%E6%BA%90%E7%A0%81/Jetpack/Lifecycle%E5%8E%9F%E7%90%86%E6%BA%90%E7%A0%81" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>LifecycleåŸç†æºç </p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/android/2%E4%B8%BB%E6%B5%81%E5%BA%93%E6%BA%90%E7%A0%81/Jetpack/LiveData%E5%8E%9F%E7%90%86%E6%BA%90%E7%A0%81" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>LiveDataåŸç†æºç </p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/android/2%E4%B8%BB%E6%B5%81%E5%BA%93%E6%BA%90%E7%A0%81/Jetpack/RecyclerView%E5%8E%9F%E7%90%86%E6%BA%90%E7%A0%81" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>RecyclerViewåŸç†æºç </p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/android/2%E4%B8%BB%E6%B5%81%E5%BA%93%E6%BA%90%E7%A0%81/Jetpack/Room%E5%8E%9F%E7%90%86%E6%BA%90%E7%A0%81" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>RoomåŸç†æºç </p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/android/2%E4%B8%BB%E6%B5%81%E5%BA%93%E6%BA%90%E7%A0%81/Jetpack/ViewModel%E5%8E%9F%E7%90%86%E6%BA%90%E7%A0%81" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>ViewModelåŸç†æºç </p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/android/2%E4%B8%BB%E6%B5%81%E5%BA%93%E6%BA%90%E7%A0%81/Jetpack/ViewPager2%E5%8E%9F%E7%90%86%E6%BA%90%E7%A0%81" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>ViewPager2åŸç†æºç </p><!--]--></a><!----></div><!----></div><!--]--></div></section><!--]--></div></section></div><div class="no-transition group" data-v-8d50c081><section class="VPSidebarItem level-0 collapsible has-active" data-v-8d50c081 data-v-d81de50c><div class="item" role="button" tabindex="0" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><h2 class="text" data-v-d81de50c>3é¢è¯•</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-d81de50c><span class="vpi-chevron-right caret-icon" data-v-d81de50c></span></div></div><div class="items" data-v-d81de50c><!--[--><div class="VPSidebarItem level-1 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/android/3%E9%9D%A2%E8%AF%95/0%E8%AE%B0%E5%BD%95" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>0è®°å½•</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/android/3%E9%9D%A2%E8%AF%95/1%E5%B8%B8%E8%80%83%E9%A2%98" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>1å¸¸è€ƒé¢˜</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/android/3%E9%9D%A2%E8%AF%95/2%E7%AE%97%E6%B3%95%E9%A2%98" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>2ç®—æ³•é¢˜</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/android/3%E9%9D%A2%E8%AF%95/%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>åº•å±‚åŸç†</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/android/3%E9%9D%A2%E8%AF%95/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>è®¾è®¡æ¨¡å¼</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/android/3%E9%9D%A2%E8%AF%95/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>æ€§èƒ½ä¼˜åŒ–</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/android/3%E9%9D%A2%E8%AF%95/React%20Native" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>React Native</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-1df9f90f data-v-aff0b8d7><div class="VPDoc has-sidebar has-aside" data-v-aff0b8d7 data-v-7011f0d8><!--[--><!--]--><div class="container" data-v-7011f0d8><div class="aside" data-v-7011f0d8><div class="aside-curtain" data-v-7011f0d8></div><div class="aside-container" data-v-7011f0d8><div class="aside-content" data-v-7011f0d8><div class="VPDocAside" data-v-7011f0d8 data-v-3f215769><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-3f215769 data-v-60d5052e><div class="content" data-v-60d5052e><div class="outline-marker" data-v-60d5052e></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-60d5052e>ç›®å½•</div><ul class="VPDocOutlineItem root" data-v-60d5052e data-v-2d0bdf9b><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-3f215769></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-7011f0d8><div class="content-container" data-v-7011f0d8><!--[--><!--]--><main class="main" data-v-7011f0d8><div style="position:relative;" class="vp-doc _android_3%E9%9D%A2%E8%AF%95_1%E5%B8%B8%E8%80%83%E9%A2%98" data-v-7011f0d8><div><h1 id="android-é«˜çº§å¼€å‘é¢è¯•å¸¸è€ƒé¢˜" tabindex="-1">Android é«˜çº§å¼€å‘é¢è¯•å¸¸è€ƒé¢˜ <a class="header-anchor" href="#android-é«˜çº§å¼€å‘é¢è¯•å¸¸è€ƒé¢˜" aria-label="Permalink to â€œAndroid é«˜çº§å¼€å‘é¢è¯•å¸¸è€ƒé¢˜â€">â€‹</a></h1><h2 id="ğŸ“±-android-æ¡†æ¶åŸç†" tabindex="-1">ğŸ“± Android æ¡†æ¶åŸç† <a class="header-anchor" href="#ğŸ“±-android-æ¡†æ¶åŸç†" aria-label="Permalink to â€œğŸ“± Android æ¡†æ¶åŸç†â€">â€‹</a></h2><h3 id="_1-activity-å¯åŠ¨æµç¨‹" tabindex="-1">1. Activity å¯åŠ¨æµç¨‹ <a class="header-anchor" href="#_1-activity-å¯åŠ¨æµç¨‹" aria-label="Permalink to â€œ1. Activity å¯åŠ¨æµç¨‹â€">â€‹</a></h3><p><strong>é¢˜ç›®</strong>ï¼šè¯·è¯¦ç»†æè¿° Activity çš„å¯åŠ¨æµç¨‹ï¼Œä» startActivity() åˆ° onResume() çš„å®Œæ•´è¿‡ç¨‹</p><p><strong>è€ƒå¯Ÿç‚¹</strong>ï¼š</p><ul><li>AMSã€ActivityThreadã€Instrumentation çš„ä½œç”¨</li><li>åº”ç”¨è¿›ç¨‹ä¸ç³»ç»ŸæœåŠ¡çš„äº¤äº’</li><li>ç”Ÿå‘½å‘¨æœŸå›è°ƒçš„æ—¶æœº</li></ul><p><strong>å‚è€ƒç­”æ¡ˆ</strong>ï¼š</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>1. åº”ç”¨è¿›ç¨‹è°ƒç”¨ startActivity()</span></span>
<span class="line"><span>2. é€šè¿‡ Binder è°ƒç”¨åˆ° AMS</span></span>
<span class="line"><span>3. AMS æ£€æŸ¥æƒé™ã€åˆ›å»º ActivityRecordã€æ‰¾åˆ°ç›®æ ‡è¿›ç¨‹</span></span>
<span class="line"><span>4. å¦‚æœç›®æ ‡è¿›ç¨‹ä¸å­˜åœ¨ï¼Œé€šè¿‡ zygote fork æ–°è¿›ç¨‹</span></span>
<span class="line"><span>5. ç›®æ ‡è¿›ç¨‹å¯åŠ¨ ActivityThreadï¼Œè°ƒç”¨ main()</span></span>
<span class="line"><span>6. åˆ›å»º Applicationï¼ŒattachBaseContext()</span></span>
<span class="line"><span>7. åˆ›å»º Activity å®ä¾‹ï¼Œè°ƒç”¨ onCreate()</span></span>
<span class="line"><span>8. ä¾æ¬¡æ‰§è¡Œ onStart()ã€onResume()</span></span>
<span class="line"><span>9. å®Œæˆ UI ç»˜åˆ¶å¹¶æ˜¾ç¤º</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="_2-view-çš„ç»˜åˆ¶æµç¨‹" tabindex="-1">2. View çš„ç»˜åˆ¶æµç¨‹ <a class="header-anchor" href="#_2-view-çš„ç»˜åˆ¶æµç¨‹" aria-label="Permalink to â€œ2. View çš„ç»˜åˆ¶æµç¨‹â€">â€‹</a></h3><p><strong>é¢˜ç›®</strong>ï¼šæè¿° View çš„ measureã€layoutã€draw è¿‡ç¨‹ï¼Œä»¥åŠè‡ªå®šä¹‰ View çš„æ³¨æ„äº‹é¡¹</p><p><strong>å‚è€ƒç­”æ¡ˆ</strong>ï¼š</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ç»˜åˆ¶æµç¨‹</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> draw</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Canvas canvas) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 1. ç»˜åˆ¶èƒŒæ™¯</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    drawBackground</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(canvas);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 2. ç»˜åˆ¶å†…å®¹</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    onDraw</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(canvas);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 3. ç»˜åˆ¶å­ View</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    dispatchDraw</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(canvas);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 4. ç»˜åˆ¶è£…é¥°ï¼ˆæ»šåŠ¨æ¡ç­‰ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    onDrawForeground</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(canvas);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// è‡ªå®šä¹‰ View è¦ç‚¹ï¼š</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// - æ”¯æŒ wrap_content</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// - æ”¯æŒ padding</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// - é¿å…å†…å­˜æ³„æ¼</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// - å¤„ç†è§¦æ‘¸äº‹ä»¶å†²çª</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h3 id="_3-binder-æœºåˆ¶åŸç†" tabindex="-1">3. Binder æœºåˆ¶åŸç† <a class="header-anchor" href="#_3-binder-æœºåˆ¶åŸç†" aria-label="Permalink to â€œ3. Binder æœºåˆ¶åŸç†â€">â€‹</a></h3><p><strong>é¢˜ç›®</strong>ï¼šè§£é‡Š Binder çš„å·¥ä½œåŸç†ï¼Œä¸ºä»€ä¹ˆ Android é€‰æ‹© Binder è€Œä¸æ˜¯ä¼ ç»Ÿçš„ IPC</p><p><strong>å‚è€ƒç­”æ¡ˆ</strong>ï¼š</p><ul><li><strong>ä¸€æ¬¡æ‹·è´</strong>ï¼šé€šè¿‡å†…å­˜æ˜ å°„ï¼Œæ•°æ®åªéœ€æ‹·è´ä¸€æ¬¡</li><li><strong>å®‰å…¨æ€§</strong>ï¼šåŸºäº C/S æ¶æ„ï¼Œèº«ä»½éªŒè¯å®Œå–„</li><li><strong>æ€§èƒ½</strong>ï¼šç›¸æ¯” Socketã€ç®¡é“ç­‰æ€§èƒ½æ›´å¥½</li><li><strong>é¢å‘å¯¹è±¡</strong>ï¼šå¯ä»¥åƒè°ƒç”¨æœ¬åœ°æ–¹æ³•ä¸€æ ·è°ƒç”¨è¿œç¨‹æ–¹æ³•</li></ul><h2 id="âš¡-æ€§èƒ½ä¼˜åŒ–" tabindex="-1">âš¡ æ€§èƒ½ä¼˜åŒ– <a class="header-anchor" href="#âš¡-æ€§èƒ½ä¼˜åŒ–" aria-label="Permalink to â€œâš¡ æ€§èƒ½ä¼˜åŒ–â€">â€‹</a></h2><h3 id="_4-å†…å­˜æ³„æ¼æ’æŸ¥ä¸è§£å†³" tabindex="-1">4. å†…å­˜æ³„æ¼æ’æŸ¥ä¸è§£å†³ <a class="header-anchor" href="#_4-å†…å­˜æ³„æ¼æ’æŸ¥ä¸è§£å†³" aria-label="Permalink to â€œ4. å†…å­˜æ³„æ¼æ’æŸ¥ä¸è§£å†³â€">â€‹</a></h3><p><strong>é¢˜ç›®</strong>ï¼šå¦‚ä½•æ£€æµ‹å’Œè§£å†³å†…å­˜æ³„æ¼ï¼Ÿè¯·ä¸¾ä¾‹è¯´æ˜å¸¸è§çš„å†…å­˜æ³„æ¼åœºæ™¯</p><p><strong>å‚è€ƒç­”æ¡ˆ</strong>ï¼š</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å¸¸è§å†…å­˜æ³„æ¼åœºæ™¯ï¼š</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 1. é™æ€å˜é‡æŒæœ‰ Activity å¼•ç”¨</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> LeakExample</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Activity sActivity; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å†…å­˜æ³„æ¼!</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 2. åŒ¿åå†…éƒ¨ç±»æŒæœ‰å¤–éƒ¨ç±»å¼•ç”¨</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MainActivity</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> extends</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Activity</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Handler mHandler </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Handler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> handleMessage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Message </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">msg</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // æŒæœ‰ MainActivity.this å¼•ç”¨</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 3. æœªå–æ¶ˆçš„æ³¨å†Œç›‘å¬å™¨</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">protected</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> onDestroy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    super</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">onDestroy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // å¿…é¡»åæ³¨å†Œï¼</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    sensorManager.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">unregisterListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h3 id="_5-å¯åŠ¨ä¼˜åŒ–æ–¹æ¡ˆ" tabindex="-1">5. å¯åŠ¨ä¼˜åŒ–æ–¹æ¡ˆ <a class="header-anchor" href="#_5-å¯åŠ¨ä¼˜åŒ–æ–¹æ¡ˆ" aria-label="Permalink to â€œ5. å¯åŠ¨ä¼˜åŒ–æ–¹æ¡ˆâ€">â€‹</a></h3><p><strong>é¢˜ç›®</strong>ï¼šå¦‚ä½•ä¼˜åŒ–åº”ç”¨çš„å†·å¯åŠ¨æ—¶é—´ï¼Ÿè¯·æä¾›å…·ä½“çš„ä¼˜åŒ–æ–¹æ¡ˆ</p><p><strong>å‚è€ƒç­”æ¡ˆ</strong>ï¼š</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ä¼˜åŒ–æ–¹æ¡ˆï¼š</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 1. ä¸»é¢˜ä¼˜åŒ– - ä½¿ç”¨å¯åŠ¨çª—å£</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">style name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;AppTheme.Launcher&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">item name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;android:windowBackground&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">drawable/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">launch_background</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">item</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">style</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 2. å¼‚æ­¥åˆå§‹åŒ–</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> App</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> extends</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Application</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> onCreate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        super</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">onCreate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // ä¸»çº¿ç¨‹å…³é”®åˆå§‹åŒ–</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        initEssential</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // å¼‚æ­¥åˆå§‹åŒ–å…¶ä»–ç»„ä»¶</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        AsyncTask.THREAD_POOL_EXECUTOR.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">execute</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">            initThirdPartySDK</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 3. å»¶è¿Ÿåˆå§‹åŒ–</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getWindow</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getDecorView</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">post</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // ç•Œé¢æ˜¾ç¤ºåå†åˆå§‹åŒ–éå…³é”®ç»„ä»¶</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    initNonEssentialComponents</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h3 id="_6-å¸ƒå±€ä¼˜åŒ–æŠ€å·§" tabindex="-1">6. å¸ƒå±€ä¼˜åŒ–æŠ€å·§ <a class="header-anchor" href="#_6-å¸ƒå±€ä¼˜åŒ–æŠ€å·§" aria-label="Permalink to â€œ6. å¸ƒå±€ä¼˜åŒ–æŠ€å·§â€">â€‹</a></h3><p><strong>é¢˜ç›®</strong>ï¼šå¦‚ä½•ä¼˜åŒ–å¤æ‚å¸ƒå±€çš„æ€§èƒ½ï¼Ÿæœ‰å“ªäº›å·¥å…·å’Œæ–¹æ³•ï¼Ÿ</p><p><strong>å‚è€ƒç­”æ¡ˆ</strong>ï¼š</p><div class="language-xml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">&lt;!-- ä¼˜åŒ–æŠ€å·§ï¼š --&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">&lt;!-- 1. ä½¿ç”¨ ConstraintLayout å‡å°‘å±‚çº§ --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">androidx.constraintlayout.widget.ConstraintLayout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    &lt;!-- æ‰å¹³åŒ–å¸ƒå±€ç»“æ„ --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">androidx.constraintlayout.widget.ConstraintLayout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">&lt;!-- 2. ä½¿ç”¨ merge æ ‡ç­¾ --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">merge</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> xmlns:android</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;http://schemas.android.com/apk/res/android&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    &lt;!-- é¿å…é‡å¤å¸ƒå±€ --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">merge</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">&lt;!-- 3. ä½¿ç”¨ ViewStub å»¶è¿ŸåŠ è½½ --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">ViewStub</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    android:layout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;@layout/heavy_layout&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    android:inflatedId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;@+id/heavy_content&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p><strong>å·¥å…·ä½¿ç”¨</strong>ï¼š</p><ul><li>Layout Inspectorï¼šæŸ¥çœ‹å¸ƒå±€å±‚çº§</li><li>GPU æ¸²æŸ“æ¨¡å¼åˆ†æï¼šæ£€æµ‹è¿‡åº¦ç»˜åˆ¶</li><li>Systraceï¼šåˆ†æç»˜åˆ¶æ€§èƒ½</li></ul><h2 id="ğŸ—ï¸-æ¶æ„è®¾è®¡" tabindex="-1">ğŸ—ï¸ æ¶æ„è®¾è®¡ <a class="header-anchor" href="#ğŸ—ï¸-æ¶æ„è®¾è®¡" aria-label="Permalink to â€œğŸ—ï¸ æ¶æ„è®¾è®¡â€">â€‹</a></h2><h3 id="_7-mvvm-ä¸-mvp-å¯¹æ¯”" tabindex="-1">7. MVVM ä¸ MVP å¯¹æ¯” <a class="header-anchor" href="#_7-mvvm-ä¸-mvp-å¯¹æ¯”" aria-label="Permalink to â€œ7. MVVM ä¸ MVP å¯¹æ¯”â€">â€‹</a></h3><p><strong>é¢˜ç›®</strong>ï¼šæ¯”è¾ƒ MVVM å’Œ MVP æ¶æ„çš„ä¼˜ç¼ºç‚¹ï¼Œä»¥åŠåœ¨ Android ä¸­çš„å…·ä½“å®ç°</p><p><strong>å‚è€ƒç­”æ¡ˆ</strong>ï¼š</p><div class="mermaid-container"><!----><div class="mermaid-render"></div><!--teleport start--><!--teleport end--></div><div class="language-kotlin line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// MVVM ç¤ºä¾‹</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> UserViewModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> : </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ViewModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> _users </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MutableLiveData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">List</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">User</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&gt;()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> users: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">LiveData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">List</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">User</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&gt; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> _users</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    fun</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> loadUsers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        viewModelScope.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">launch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            _users.</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">value</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> repository.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getUsers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// MVP ç¤ºä¾‹</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> UserPresenter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> view: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">UserContract</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.View,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> repository: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">UserRepository</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    fun</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> loadUsers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        view.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">showLoading</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        repository.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getUsers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { users </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            view.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">hideLoading</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            view.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">showUsers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(users)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å¯¹æ¯”ï¼š</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// MVVM ä¼˜ç‚¹ï¼šæ•°æ®ç»‘å®šï¼Œä»£ç ç®€æ´ï¼Œæ˜“äºæµ‹è¯•</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// MVVM ç¼ºç‚¹ï¼šè°ƒè¯•å›°éš¾ï¼Œè¿‡åº¦ç»‘å®šå¯èƒ½å¯¼è‡´æ€§èƒ½é—®é¢˜</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// MVP ä¼˜ç‚¹ï¼šèŒè´£æ¸…æ™°ï¼Œæ˜“äºç†è§£ï¼Œæ¥å£æ˜ç¡®</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// MVP ç¼ºç‚¹ï¼šæ¥å£è†¨èƒ€ï¼Œæ ·æ¿ä»£ç å¤š</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><h3 id="_8-ç»„ä»¶åŒ–æ¶æ„è®¾è®¡" tabindex="-1">8. ç»„ä»¶åŒ–æ¶æ„è®¾è®¡ <a class="header-anchor" href="#_8-ç»„ä»¶åŒ–æ¶æ„è®¾è®¡" aria-label="Permalink to â€œ8. ç»„ä»¶åŒ–æ¶æ„è®¾è®¡â€">â€‹</a></h3><p><strong>é¢˜ç›®</strong>ï¼šå¦‚ä½•è®¾è®¡ä¸€ä¸ªç»„ä»¶åŒ–æ¶æ„ï¼Ÿéœ€è¦è€ƒè™‘å“ªäº›é—®é¢˜ï¼Ÿ</p><p><strong>å‚è€ƒç­”æ¡ˆ</strong>ï¼š</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æ ¸å¿ƒè®¾è®¡è¦ç‚¹ï¼š</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 1. æ¨¡å—åˆ’åˆ†</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> app</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (å£³å·¥ç¨‹)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> module_base</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (åŸºç¡€åº“)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> module_user</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (ç”¨æˆ·æ¨¡å—)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> module_order</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (è®¢å•æ¨¡å—)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> module_share</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (åˆ†äº«æ¨¡å—)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 2. è·¯ç”±è®¾è®¡</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Route</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">path</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;/user/detail&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> UserDetailActivity</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> extends</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Activity</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Autowired</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> String userId;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 3. é€šä¿¡æœºåˆ¶</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// - æ¥å£ä¸‹æ²‰ï¼šåŸºç¡€æ¨¡å—å®šä¹‰æ¥å£</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// - æœåŠ¡å‘ç°ï¼šé€šè¿‡ SPI æœºåˆ¶å‘ç°å®ç°</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// - äº‹ä»¶æ€»çº¿ï¼šè·¨æ¨¡å—äº‹ä»¶é€šä¿¡</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 4. ä¾èµ–ç®¡ç†</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// - ç»Ÿä¸€ç‰ˆæœ¬ç®¡ç†</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// - é¿å…å¾ªç¯ä¾èµ–</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// - æŒ‰éœ€ä¾èµ–</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h2 id="ğŸ”§-è·¨å¹³å°æŠ€æœ¯" tabindex="-1">ğŸ”§ è·¨å¹³å°æŠ€æœ¯ <a class="header-anchor" href="#ğŸ”§-è·¨å¹³å°æŠ€æœ¯" aria-label="Permalink to â€œğŸ”§ è·¨å¹³å°æŠ€æœ¯â€">â€‹</a></h2><h3 id="_9-flutter-åŸç†" tabindex="-1">9. Flutter åŸç† <a class="header-anchor" href="#_9-flutter-åŸç†" aria-label="Permalink to â€œ9. Flutter åŸç†â€">â€‹</a></h3><p><strong>é¢˜ç›®</strong>ï¼šè§£é‡Š Flutter çš„æ¸²æŸ“åŸç†ï¼Œä¸åŸç”Ÿ Android çš„å·®å¼‚</p><p><strong>å‚è€ƒç­”æ¡ˆ</strong>ï¼š</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>Flutter æ¸²æŸ“æµç¨‹ï¼š</span></span>
<span class="line"><span>1. Widget Tree â†’ æè¿° UI ç»“æ„</span></span>
<span class="line"><span>2. Element Tree â†’ ç®¡ç† Widget ç”Ÿå‘½å‘¨æœŸ  </span></span>
<span class="line"><span>3. RenderObject Tree â†’ è´Ÿè´£å¸ƒå±€å’Œç»˜åˆ¶</span></span>
<span class="line"><span></span></span>
<span class="line"><span>ä¸åŸç”Ÿ Android å·®å¼‚ï¼š</span></span>
<span class="line"><span>- è‡ªå¸¦æ¸²æŸ“å¼•æ“ Skiaï¼Œä¸ä¾èµ–ç³»ç»Ÿæ§ä»¶</span></span>
<span class="line"><span>- å“åº”å¼ç¼–ç¨‹æ¨¡å¼</span></span>
<span class="line"><span>- ä¸€è‡´çš„è·¨å¹³å°ä½“éªŒ</span></span>
<span class="line"><span>- æ›´å¥½çš„æ€§èƒ½ï¼Œ60fps æµç•…åº¦</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="_10-æ··åˆå¼€å‘æŠ€æœ¯é€‰å‹" tabindex="-1">10. æ··åˆå¼€å‘æŠ€æœ¯é€‰å‹ <a class="header-anchor" href="#_10-æ··åˆå¼€å‘æŠ€æœ¯é€‰å‹" aria-label="Permalink to â€œ10. æ··åˆå¼€å‘æŠ€æœ¯é€‰å‹â€">â€‹</a></h3><p><strong>é¢˜ç›®</strong>ï¼šåœ¨ä»€ä¹ˆåœºæ™¯ä¸‹é€‰æ‹© Flutter/RN/åŸç”Ÿå¼€å‘ï¼Ÿå„è‡ªçš„ä¼˜ç¼ºç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ</p><p><strong>å‚è€ƒç­”æ¡ˆ</strong>ï¼š</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>Flutter é€‚ç”¨åœºæ™¯ï¼š</span></span>
<span class="line"><span>- è¿½æ±‚é«˜æ€§èƒ½å’Œæµç•…ä½“éªŒ</span></span>
<span class="line"><span>- éœ€è¦é«˜åº¦è‡ªå®šä¹‰ UI</span></span>
<span class="line"><span>- è·¨å¹³å°ä¸€è‡´æ€§è¦æ±‚é«˜</span></span>
<span class="line"><span>- å›¢é˜ŸæŠ€æœ¯æ ˆåå‘ Dart</span></span>
<span class="line"><span></span></span>
<span class="line"><span>React Native é€‚ç”¨åœºæ™¯ï¼š</span></span>
<span class="line"><span>- å·²æœ‰ React æŠ€æœ¯æ ˆ</span></span>
<span class="line"><span>- å¿«é€Ÿè¿­ä»£éœ€æ±‚</span></span>
<span class="line"><span>- ä¸°å¯Œçš„ç¬¬ä¸‰æ–¹åº“ç”Ÿæ€</span></span>
<span class="line"><span>- çƒ­æ›´æ–°éœ€æ±‚å¼ºçƒˆ</span></span>
<span class="line"><span></span></span>
<span class="line"><span>åŸç”Ÿå¼€å‘é€‚ç”¨åœºæ™¯ï¼š</span></span>
<span class="line"><span>- å¯¹æ€§èƒ½è¦æ±‚æè‡´</span></span>
<span class="line"><span>- éœ€è¦æ·±åº¦ç³»ç»Ÿé›†æˆ</span></span>
<span class="line"><span>- å¤æ‚äº¤äº’åŠ¨ç”»</span></span>
<span class="line"><span>- ç¡¬ä»¶ç›¸å…³åŠŸèƒ½å¼€å‘</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h2 id="ğŸ’»-java-kotlin-æ ¸å¿ƒ" tabindex="-1">ğŸ’» Java/Kotlin æ ¸å¿ƒ <a class="header-anchor" href="#ğŸ’»-java-kotlin-æ ¸å¿ƒ" aria-label="Permalink to â€œğŸ’» Java/Kotlin æ ¸å¿ƒâ€">â€‹</a></h2><h3 id="_11-åç¨‹åŸç†" tabindex="-1">11. åç¨‹åŸç† <a class="header-anchor" href="#_11-åç¨‹åŸç†" aria-label="Permalink to â€œ11. åç¨‹åŸç†â€">â€‹</a></h3><p><strong>é¢˜ç›®</strong>ï¼šè§£é‡Š Kotlin åç¨‹çš„å®ç°åŸç†ï¼Œä¸çº¿ç¨‹çš„åŒºåˆ«</p><p><strong>å‚è€ƒç­”æ¡ˆ</strong>ï¼š</p><div class="language-kotlin line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// åç¨‹æœ¬è´¨ï¼šæ›´è½»é‡çš„çº¿ç¨‹ï¼ŒåŸºäºçº¿ç¨‹æ± çš„å°è£…</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æŒ‚èµ·å‡½æ•°åŸç†ï¼šCPS (Continuation Passing Style) å˜æ¢</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">suspend</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> fun</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> fetchUser</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(): </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">User</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    suspendCoroutine</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { continuation </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // å¼‚æ­¥æ“ä½œå®Œæˆåæ¢å¤åç¨‹</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        api.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getUser</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { user </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            continuation.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">resume</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(user)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ä¸çº¿ç¨‹åŒºåˆ«ï¼š</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// - åˆ›å»ºæˆæœ¬ï¼šåç¨‹ â‰ˆ å‡ åå­—èŠ‚ï¼Œçº¿ç¨‹ â‰ˆ 1MB</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// - åˆ‡æ¢æˆæœ¬ï¼šåç¨‹æ›´è½»é‡</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// - è°ƒåº¦æ–¹å¼ï¼šåç¨‹æ›´çµæ´»</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="_12-å†…å­˜æ¨¡å‹ä¸å¹¶å‘" tabindex="-1">12. å†…å­˜æ¨¡å‹ä¸å¹¶å‘ <a class="header-anchor" href="#_12-å†…å­˜æ¨¡å‹ä¸å¹¶å‘" aria-label="Permalink to â€œ12. å†…å­˜æ¨¡å‹ä¸å¹¶å‘â€">â€‹</a></h3><p><strong>é¢˜ç›®</strong>ï¼šè§£é‡Š Java å†…å­˜æ¨¡å‹ï¼Œvolatile å’Œ synchronized çš„ä½œç”¨</p><p><strong>å‚è€ƒç­”æ¡ˆ</strong>ï¼š</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Java å†…å­˜æ¨¡å‹ï¼šä¿è¯å¤šçº¿ç¨‹ç¯å¢ƒä¸‹çš„å¯è§æ€§ã€æœ‰åºæ€§ã€åŸå­æ€§</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// volatileï¼šä¿è¯å¯è§æ€§å’Œæœ‰åºæ€§</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> VolatileExample</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> volatile</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> boolean</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> flag </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> writer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        flag </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å†™æ“ä½œï¼Œç«‹å³å¯¹å…¶ä»–çº¿ç¨‹å¯è§</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// synchronizedï¼šä¿è¯åŸå­æ€§ã€å¯è§æ€§ã€æœ‰åºæ€§  </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> SyncExample</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> count </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> synchronized</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> increment</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        count</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// åŸå­æ“ä½œ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h2 id="ğŸ› ï¸-å·¥ç¨‹å®è·µ" tabindex="-1">ğŸ› ï¸ å·¥ç¨‹å®è·µ <a class="header-anchor" href="#ğŸ› ï¸-å·¥ç¨‹å®è·µ" aria-label="Permalink to â€œğŸ› ï¸ å·¥ç¨‹å®è·µâ€">â€‹</a></h2><h3 id="_13-gradle-æ„å»ºä¼˜åŒ–" tabindex="-1">13. Gradle æ„å»ºä¼˜åŒ– <a class="header-anchor" href="#_13-gradle-æ„å»ºä¼˜åŒ–" aria-label="Permalink to â€œ13. Gradle æ„å»ºä¼˜åŒ–â€">â€‹</a></h3><p><strong>é¢˜ç›®</strong>ï¼šå¦‚ä½•ä¼˜åŒ– Gradle æ„å»ºé€Ÿåº¦ï¼Ÿè¯·æä¾›å…·ä½“æ–¹æ¡ˆ</p><p><strong>å‚è€ƒç­”æ¡ˆ</strong>ï¼š</p><div class="language-gradle line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">gradle</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>// 1. å¼€å¯æ„å»ºç¼“å­˜</span></span>
<span class="line"><span>android {</span></span>
<span class="line"><span>    buildCache {</span></span>
<span class="line"><span>        local {</span></span>
<span class="line"><span>            enabled = true</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>// 2. å¼€å¯å¹¶è¡Œæ„å»º</span></span>
<span class="line"><span>org.gradle.parallel=true</span></span>
<span class="line"><span></span></span>
<span class="line"><span>// 3. å¼€å¯é…ç½®ç¼“å­˜</span></span>
<span class="line"><span>org.gradle.unsafe.configuration-cache=true</span></span>
<span class="line"><span></span></span>
<span class="line"><span>// 4. æ¨¡å—åŒ–æ„å»ºï¼Œé¿å…ä¿®æ”¹ä¸€ä¸ªæ¨¡å—ç¼–è¯‘å…¨éƒ¨</span></span>
<span class="line"><span></span></span>
<span class="line"><span>// 5. ä½¿ç”¨æœ€æ–° Gradle å’Œ Android Gradle Plugin</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h3 id="_14-ç¨³å®šæ€§ç›‘æ§" tabindex="-1">14. ç¨³å®šæ€§ç›‘æ§ <a class="header-anchor" href="#_14-ç¨³å®šæ€§ç›‘æ§" aria-label="Permalink to â€œ14. ç¨³å®šæ€§ç›‘æ§â€">â€‹</a></h3><p><strong>é¢˜ç›®</strong>ï¼šå¦‚ä½•å»ºç«‹åº”ç”¨çš„ç¨³å®šæ€§ç›‘æ§ä½“ç³»ï¼Ÿ</p><p><strong>å‚è€ƒç­”æ¡ˆ</strong>ï¼š</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 1. å´©æºƒæ”¶é›†</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Thread.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setDefaultUncaughtExceptionHandler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((thread, throwable) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // ä¸Šä¼ å´©æºƒä¿¡æ¯</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    uploadCrash</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(throwable);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // é‡å¯åº”ç”¨æˆ–å‹å¥½æç¤º</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    restartApp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 2. æ€§èƒ½ç›‘æ§</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> PerformanceMonitor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> monitorFrameRate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        Choreographer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getInstance</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">postFrameCallback</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Choreographer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">FrameCallback</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> doFrame</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">long</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> frameTimeNanos) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                // è®¡ç®—å¸§ç‡ï¼Œæ£€æµ‹å¡é¡¿</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 3. å†…å­˜ç›‘æ§</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Debug.MemoryInfo memoryInfo </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Debug.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">MemoryInfo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Debug.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getMemoryInfo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(memoryInfo);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h2 id="ğŸ¯-ç³»ç»Ÿè®¾è®¡é¢˜" tabindex="-1">ğŸ¯ ç³»ç»Ÿè®¾è®¡é¢˜ <a class="header-anchor" href="#ğŸ¯-ç³»ç»Ÿè®¾è®¡é¢˜" aria-label="Permalink to â€œğŸ¯ ç³»ç»Ÿè®¾è®¡é¢˜â€">â€‹</a></h2><h3 id="_15-å›¾ç‰‡åŠ è½½æ¡†æ¶è®¾è®¡" tabindex="-1">15. å›¾ç‰‡åŠ è½½æ¡†æ¶è®¾è®¡ <a class="header-anchor" href="#_15-å›¾ç‰‡åŠ è½½æ¡†æ¶è®¾è®¡" aria-label="Permalink to â€œ15. å›¾ç‰‡åŠ è½½æ¡†æ¶è®¾è®¡â€">â€‹</a></h3><p><strong>é¢˜ç›®</strong>ï¼šè®¾è®¡ä¸€ä¸ªå›¾ç‰‡åŠ è½½æ¡†æ¶ï¼Œéœ€è¦è€ƒè™‘å“ªäº›æ–¹é¢ï¼Ÿ</p><p><strong>å‚è€ƒç­”æ¡ˆ</strong>ï¼š</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ImageLoader</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // æ ¸å¿ƒç»„ä»¶ï¼š</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 1. ä¸‰çº§ç¼“å­˜</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> MemoryCache memoryCache;    </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å†…å­˜ç¼“å­˜</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DiskCache diskCache;        </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ç£ç›˜ç¼“å­˜  </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> NetworkLoader networkLoader; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ç½‘ç»œåŠ è½½</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 2. çº¿ç¨‹æ± ç®¡ç†</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ExecutorService loadExecutor;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Handler mainHandler;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 3. ç”Ÿå‘½å‘¨æœŸæ„ŸçŸ¥</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> into</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ImageView </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">imageView</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // ç»‘å®šç”Ÿå‘½å‘¨æœŸï¼Œé¿å…å†…å­˜æ³„æ¼</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 4. å›¾ç‰‡å˜æ¢å’Œå‹ç¼©</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Bitmap </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">transform</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Bitmap </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">source</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // æ ¹æ® View å¤§å°è¿›è¡Œå‹ç¼©</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 5. åŠ è½½ç­–ç•¥</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // - ä¼˜å…ˆçº§ç®¡ç†</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // - å¤±è´¥é‡è¯•</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // - æ¸è¿›å¼åŠ è½½</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h3 id="_16-ç½‘ç»œå±‚å°è£…è®¾è®¡" tabindex="-1">16. ç½‘ç»œå±‚å°è£…è®¾è®¡ <a class="header-anchor" href="#_16-ç½‘ç»œå±‚å°è£…è®¾è®¡" aria-label="Permalink to â€œ16. ç½‘ç»œå±‚å°è£…è®¾è®¡â€">â€‹</a></h3><p><strong>é¢˜ç›®</strong>ï¼šå¦‚ä½•è®¾è®¡ä¸€ä¸ªå¥å£®çš„ç½‘ç»œè¯·æ±‚æ¡†æ¶ï¼Ÿ</p><p><strong>å‚è€ƒç­”æ¡ˆ</strong>ï¼š</p><div class="language-kotlin line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> NetworkFramework</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // æ ¸å¿ƒç‰¹æ€§ï¼š</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 1. å¤šåè®®æ”¯æŒï¼ˆHTTP/2, QUICï¼‰</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 2. è¿æ¥æ± å’Œå¤ç”¨</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 3. è¯·æ±‚æ‹¦æˆªå™¨</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Interceptor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        fun</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> intercept</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(chain: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Chain</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">): </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Response</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 4. ç¼“å­˜ç­–ç•¥</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    enum</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> CachePolicy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        CACHE_FIRST, NETWORK_FIRST, NETWORK_ONLY</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 5. é‡è¯•æœºåˆ¶</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> RetryInterceptor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> : </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Interceptor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        override</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> fun</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> intercept</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(chain: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Chain</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">): </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Response</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> retryCount </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (retryCount </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> MAX_RETRY) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chain.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">proceed</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(chain.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">request</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (e: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">IOException</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                    retryCount</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            throw</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> IOException</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Retry failed&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 6. æ•°æ®è§£æå’Œæ˜ å°„</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 7. é”™è¯¯ç»Ÿä¸€å¤„ç†</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><hr><h2 id="ğŸ’¡-é¢è¯•æŠ€å·§" tabindex="-1">ğŸ’¡ é¢è¯•æŠ€å·§ <a class="header-anchor" href="#ğŸ’¡-é¢è¯•æŠ€å·§" aria-label="Permalink to â€œğŸ’¡ é¢è¯•æŠ€å·§â€">â€‹</a></h2><h3 id="ç­”é¢˜å»ºè®®" tabindex="-1">ç­”é¢˜å»ºè®® <a class="header-anchor" href="#ç­”é¢˜å»ºè®®" aria-label="Permalink to â€œç­”é¢˜å»ºè®®â€">â€‹</a></h3><ol><li><strong>å…ˆç†è§£é—®é¢˜</strong>ï¼šç¡®ä¿ç†è§£é¢è¯•å®˜çš„çœŸå®æ„å›¾</li><li><strong>ç»“æ„åŒ–å›ç­”</strong>ï¼šä½¿ç”¨ STAR æ³•åˆ™ï¼ˆæƒ…å¢ƒã€ä»»åŠ¡ã€è¡ŒåŠ¨ã€ç»“æœï¼‰</li><li><strong>ç»“åˆå®è·µç»éªŒ</strong>ï¼šç”¨å®é™…é¡¹ç›®ç»éªŒæ”¯æ’‘ç†è®º</li><li><strong>å±•ç¤ºæ€è€ƒè¿‡ç¨‹</strong>ï¼šå³ä½¿æ˜¯éš¾é¢˜ï¼Œä¹Ÿè¦å±•ç¤ºè§£å†³æ€è·¯</li><li><strong>ä¸»åŠ¨å»¶ä¼¸</strong>ï¼šåœ¨å›ç­”åŸºç¡€ä¸Šå±•ç¤ºæ›´æ·±çš„ç†è§£</li></ol><h3 id="å‡†å¤‡é‡ç‚¹" tabindex="-1">å‡†å¤‡é‡ç‚¹ <a class="header-anchor" href="#å‡†å¤‡é‡ç‚¹" aria-label="Permalink to â€œå‡†å¤‡é‡ç‚¹â€">â€‹</a></h3><ul><li><strong>åŸºç¡€æ‰å®</strong>ï¼šJava/Kotlinã€Android æ¡†æ¶åŸç†</li><li><strong>é¡¹ç›®ç»éªŒ</strong>ï¼šå‡†å¤‡ 2-3 ä¸ªæ·±åº¦å‚ä¸çš„é¡¹ç›®</li><li><strong>æ¶æ„æ€ç»´</strong>ï¼šèƒ½å¤Ÿè¿›è¡Œç³»ç»Ÿè®¾è®¡å’ŒæŠ€æœ¯é€‰å‹</li><li><strong>å­¦ä¹ èƒ½åŠ›</strong>ï¼šå±•ç¤ºå¯¹æ–°æŠ€æœ¯çš„ç†è§£å’Œå­¦ä¹ è¿‡ç¨‹</li></ul><p>å¸Œæœ›è¿™äº›é¢˜ç›®å’Œå‚è€ƒç­”æ¡ˆèƒ½å¸®åŠ©ä½ æ›´å¥½åœ°å‡†å¤‡é¢è¯•ï¼</p></div></div></main><footer class="VPDocFooter" data-v-7011f0d8 data-v-e257564d><!--[--><!--]--><div class="edit-info" data-v-e257564d><div class="edit-link" data-v-e257564d><a class="VPLink link vp-external-link-icon no-icon edit-link-button" href="https://github.com/yuan0x00/VitePress/blob/main/docs/android/3é¢è¯•/1å¸¸è€ƒé¢˜.md" target="_blank" rel="noreferrer" data-v-e257564d><!--[--><span class="vpi-square-pen edit-link-icon" data-v-e257564d></span> Edit this page<!--]--></a></div><div class="last-updated" data-v-e257564d><p class="VPLastUpdated" data-v-e257564d data-v-e98dd255>æœ€è¿‘æ›´æ–°: <time datetime="2025-11-12T12:38:36.000Z" data-v-e98dd255></time></p></div></div><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-e257564d><span class="visually-hidden" id="doc-footer-aria-label" data-v-e257564d>Pager</span><div class="pager" data-v-e257564d><a class="VPLink link pager-link prev" href="/android/3%E9%9D%A2%E8%AF%95/0%E8%AE%B0%E5%BD%95" data-v-e257564d><!--[--><span class="desc" data-v-e257564d>ä¸Šä¸€ç¯‡</span><span class="title" data-v-e257564d>0è®°å½•</span><!--]--></a></div><div class="pager" data-v-e257564d><a class="VPLink link pager-link next" href="/android/3%E9%9D%A2%E8%AF%95/2%E7%AE%97%E6%B3%95%E9%A2%98" data-v-e257564d><!--[--><span class="desc" data-v-e257564d>ä¸‹ä¸€ç¯‡</span><span class="title" data-v-e257564d>2ç®—æ³•é¢˜</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!--]--></div></div>
    
    
  </body>
</html>