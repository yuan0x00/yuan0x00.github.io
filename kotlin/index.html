<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Android é¢è¯• Kotlin ç›¸å…³é«˜é¢‘è€ƒç‚¹ä¸å‚è€ƒç­”æ¡ˆ | Blog</title>
    <meta name="description" content="A VitePress site">
    <meta name="generator" content="VitePress v2.0.0-alpha.12">
    <link rel="preload stylesheet" href="/assets/style.lcwUUJCL.css" as="style">
    <link rel="preload stylesheet" href="/vp-icons.css" as="style">
    <script type="module" src="/assets/chunks/metadata.69592084.js"></script>
    <script type="module" src="/assets/app.CtwxS5dU.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/theme.BnXDAH3V.js">
    <link rel="modulepreload" href="/assets/chunks/framework.BiF827kf.js">
    <link rel="modulepreload" href="/assets/kotlin_index.md.D0Owi6QF.lean.js">
    <link rel="icon" type="image/svg+xml" href="https://vitepress.dev/vitepress-logo-mini.svg">
    <link rel="icon" type="image/png" href="https://vitepress.dev/vitepress-logo-mini.png">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-1df9f90f><!--[--><!--]--><!--[--><span tabindex="-1" data-v-0b0ada53></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-0b0ada53>Skip to content</a><!--]--><!----><header class="VPNav" data-v-1df9f90f data-v-9f75dce3><div class="VPNavBar" data-v-9f75dce3 data-v-2a96a3d0><div class="wrapper" data-v-2a96a3d0><div class="container" data-v-2a96a3d0><div class="title" data-v-2a96a3d0><div class="VPNavBarTitle has-sidebar" data-v-2a96a3d0 data-v-1e38c6bc><a class="title" href="/" data-v-1e38c6bc><!--[--><!--]--><!--[--><img class="VPImage logo" src="/android.svg" width="24" height="24" alt data-v-8426fc1a><!--]--><span data-v-1e38c6bc>Blog</span><!--[--><!--]--></a></div></div><div class="content" data-v-2a96a3d0><div class="content-body" data-v-2a96a3d0><!--[--><!--]--><div class="VPNavBarSearch search" data-v-2a96a3d0><!--[--><!----><div id="local-search"><button type="button" aria-label="Search" aria-keyshortcuts="/ control+k meta+k" class="DocSearch DocSearch-Button"><span class="DocSearch-Button-Container"><span class="vpi-search DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key"></kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-2a96a3d0 data-v-39714824><span id="main-nav-aria-label" class="visually-hidden" data-v-39714824> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/" tabindex="0" data-v-39714824 data-v-e56f3d57><!--[--><span data-v-e56f3d57>é¦–é¡µ</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/android/" tabindex="0" data-v-39714824 data-v-e56f3d57><!--[--><span data-v-e56f3d57>Android</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink active" href="/kotlin/" tabindex="0" data-v-39714824 data-v-e56f3d57><!--[--><span data-v-e56f3d57>Kotlin</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-2a96a3d0 data-v-6c893767><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-6c893767 data-v-5337faa4 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-5337faa4></span><span class="vpi-moon moon" data-v-5337faa4></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-2a96a3d0 data-v-0394ad82 data-v-d07f11e6><!--[--><a class="VPSocialLink no-icon" href="https://github.com/yuan0x00" aria-label="github" target="_blank" rel="me noopener" data-v-d07f11e6 data-v-591a6b30><span class="vpi-social-github"></span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-2a96a3d0 data-v-bb2aa2f0 data-v-42cb505d><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-42cb505d><span class="vpi-more-horizontal icon" data-v-42cb505d></span></button><div class="menu" data-v-42cb505d><div class="VPMenu" data-v-42cb505d data-v-25a6cce8><!----><!--[--><!--[--><!----><div class="group" data-v-bb2aa2f0><div class="item appearance" data-v-bb2aa2f0><p class="label" data-v-bb2aa2f0>æ·±æµ…æ¨¡å¼</p><div class="appearance-action" data-v-bb2aa2f0><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-bb2aa2f0 data-v-5337faa4 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-5337faa4></span><span class="vpi-moon moon" data-v-5337faa4></span><!--]--></span></span></button></div></div></div><div class="group" data-v-bb2aa2f0><div class="item social-links" data-v-bb2aa2f0><div class="VPSocialLinks social-links-list" data-v-bb2aa2f0 data-v-d07f11e6><!--[--><a class="VPSocialLink no-icon" href="https://github.com/yuan0x00" aria-label="github" target="_blank" rel="me noopener" data-v-d07f11e6 data-v-591a6b30><span class="vpi-social-github"></span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-2a96a3d0 data-v-e5dd9c1c><span class="container" data-v-e5dd9c1c><span class="top" data-v-e5dd9c1c></span><span class="middle" data-v-e5dd9c1c></span><span class="bottom" data-v-e5dd9c1c></span></span></button></div></div></div></div><div class="divider" data-v-2a96a3d0><div class="divider-line" data-v-2a96a3d0></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-1df9f90f data-v-8acdfeb5><div class="container" data-v-8acdfeb5><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-8acdfeb5><span class="vpi-align-left menu-icon" data-v-8acdfeb5></span><span class="menu-text" data-v-8acdfeb5>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-8acdfeb5 data-v-0bf0e06f><button data-v-0bf0e06f>è¿”å›é¡¶éƒ¨</button><!----></div></div></div><aside class="VPSidebar" data-v-1df9f90f data-v-e7c6e512><div class="curtain" data-v-e7c6e512></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-e7c6e512><span class="visually-hidden" id="sidebar-aria-label" data-v-e7c6e512> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-8d50c081><section class="VPSidebarItem level-0 collapsible has-active" data-v-8d50c081 data-v-d81de50c><div class="item" role="button" tabindex="0" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><h2 class="text" data-v-d81de50c>Kotlin</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-d81de50c><span class="vpi-chevron-right caret-icon" data-v-d81de50c></span></div></div><div class="items" data-v-d81de50c><!--[--><div class="VPSidebarItem level-1 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/kotlin/" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>æ¦‚è§ˆ</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-1df9f90f data-v-aff0b8d7><div class="VPDoc has-sidebar has-aside" data-v-aff0b8d7 data-v-7011f0d8><!--[--><!--]--><div class="container" data-v-7011f0d8><div class="aside" data-v-7011f0d8><div class="aside-curtain" data-v-7011f0d8></div><div class="aside-container" data-v-7011f0d8><div class="aside-content" data-v-7011f0d8><div class="VPDocAside" data-v-7011f0d8 data-v-3f215769><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-3f215769 data-v-60d5052e><div class="content" data-v-60d5052e><div class="outline-marker" data-v-60d5052e></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-60d5052e>ç›®å½•</div><ul class="VPDocOutlineItem root" data-v-60d5052e data-v-2d0bdf9b><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-3f215769></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-7011f0d8><div class="content-container" data-v-7011f0d8><!--[--><!--]--><main class="main" data-v-7011f0d8><div style="position:relative;" class="vp-doc _kotlin_" data-v-7011f0d8><div><h1 id="android-é¢è¯•-kotlin-ç›¸å…³é«˜é¢‘è€ƒç‚¹ä¸å‚è€ƒç­”æ¡ˆ" tabindex="-1">Android é¢è¯• Kotlin ç›¸å…³é«˜é¢‘è€ƒç‚¹ä¸å‚è€ƒç­”æ¡ˆ <a class="header-anchor" href="#android-é¢è¯•-kotlin-ç›¸å…³é«˜é¢‘è€ƒç‚¹ä¸å‚è€ƒç­”æ¡ˆ" aria-label="Permalink to â€œAndroid é¢è¯• Kotlin ç›¸å…³é«˜é¢‘è€ƒç‚¹ä¸å‚è€ƒç­”æ¡ˆâ€">â€‹</a></h1><h2 id="ä¸€ã€kotlin-åŸºç¡€è¯­æ³•-å¿…è€ƒ" tabindex="-1">ä¸€ã€Kotlin åŸºç¡€è¯­æ³•ï¼ˆå¿…è€ƒï¼‰ <a class="header-anchor" href="#ä¸€ã€kotlin-åŸºç¡€è¯­æ³•-å¿…è€ƒ" aria-label="Permalink to â€œä¸€ã€Kotlin åŸºç¡€è¯­æ³•ï¼ˆå¿…è€ƒï¼‰â€">â€‹</a></h2><h3 id="_1-kotlin-ä¸-java-çš„ä¸»è¦åŒºåˆ«" tabindex="-1">1. <strong>Kotlin ä¸ Java çš„ä¸»è¦åŒºåˆ«ï¼Ÿ</strong> <a class="header-anchor" href="#_1-kotlin-ä¸-java-çš„ä¸»è¦åŒºåˆ«" aria-label="Permalink to â€œ1. Kotlin ä¸ Java çš„ä¸»è¦åŒºåˆ«ï¼Ÿâ€">â€‹</a></h3><h4 id="âœ…-å‚è€ƒç­”æ¡ˆ" tabindex="-1">âœ… å‚è€ƒç­”æ¡ˆï¼š <a class="header-anchor" href="#âœ…-å‚è€ƒç­”æ¡ˆ" aria-label="Permalink to â€œâœ… å‚è€ƒç­”æ¡ˆï¼šâ€">â€‹</a></h4><table tabindex="0"><thead><tr><th>ç‰¹æ€§</th><th>Kotlin</th><th>Java</th></tr></thead><tbody><tr><td><strong>ç©ºå®‰å…¨</strong></td><td>ç¼–è¯‘æœŸæ£€æŸ¥ï¼Œ<code>String?</code> è¡¨ç¤ºå¯ç©º</td><td>æ— ï¼Œè¿è¡Œæ—¶ NPE</td></tr><tr><td><strong>ç±»å‹æ¨æ–­</strong></td><td><code>val name = &quot;Kotlin&quot;</code> è‡ªåŠ¨æ¨æ–­</td><td>éœ€æ˜¾å¼å£°æ˜ <code>String name = &quot;Java&quot;;</code></td></tr><tr><td><strong>æ•°æ®ç±»</strong></td><td><code>data class User(val name: String)</code> è‡ªåŠ¨ç”Ÿæˆ <code>equals</code>/<code>hashCode</code>/<code>toString</code></td><td>éœ€æ‰‹åŠ¨ç¼–å†™æˆ– Lombok</td></tr><tr><td><strong>æ‰©å±•å‡½æ•°</strong></td><td>å¯ç›´æ¥ä¸ºå·²æœ‰ç±»æ·»åŠ æ–¹æ³•</td><td>éœ€ç»§æ‰¿æˆ–å·¥å…·ç±»</td></tr><tr><td><strong>å‡½æ•°å¼ç¼–ç¨‹</strong></td><td>ä¸€æµæ”¯æŒï¼ˆé«˜é˜¶å‡½æ•°ã€lambdaï¼‰</td><td>Java 8+ éƒ¨åˆ†æ”¯æŒ</td></tr><tr><td><strong>é»˜è®¤å‚æ•° &amp; å‘½åå‚æ•°</strong></td><td><code>fun foo(a: Int = 1, b: String = &quot;x&quot;)</code></td><td>ä¸æ”¯æŒï¼ˆéœ€é‡è½½ï¼‰</td></tr><tr><td><strong>åç¨‹</strong></td><td>åŸç”Ÿæ”¯æŒï¼ˆ<code>suspend</code>ï¼‰</td><td>æ— ï¼ˆéœ€ RxJava/CompletableFutureï¼‰</td></tr></tbody></table><blockquote><p>ğŸ’¡ <strong>åŠ åˆ†ç‚¹</strong>ï¼šKotlin ç¼–è¯‘ä¸º JVM å­—èŠ‚ç ï¼Œ100% ä¸ Java äº’æ“ä½œã€‚</p></blockquote><hr><h3 id="_2-val-å’Œ-var-çš„åŒºåˆ«" tabindex="-1">2. <strong><code>val</code> å’Œ <code>var</code> çš„åŒºåˆ«ï¼Ÿ</strong> <a class="header-anchor" href="#_2-val-å’Œ-var-çš„åŒºåˆ«" aria-label="Permalink to â€œ2. val å’Œ var çš„åŒºåˆ«ï¼Ÿâ€">â€‹</a></h3><h4 id="âœ…-å‚è€ƒç­”æ¡ˆ-1" tabindex="-1">âœ… å‚è€ƒç­”æ¡ˆï¼š <a class="header-anchor" href="#âœ…-å‚è€ƒç­”æ¡ˆ-1" aria-label="Permalink to â€œâœ… å‚è€ƒç­”æ¡ˆï¼šâ€">â€‹</a></h4><ul><li><code>val</code>ï¼š<strong>åªè¯»å¼•ç”¨</strong>ï¼ˆç±»ä¼¼ Java <code>final</code>ï¼‰ï¼Œåˆå§‹åŒ–åä¸èƒ½é‡æ–°èµ‹å€¼ã€‚<div class="language-kotlin line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Alice&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // OK</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Bob&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">       // ç¼–è¯‘é”™è¯¯</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li><li><code>var</code>ï¼š<strong>å¯å˜å¼•ç”¨</strong>ï¼Œå¯é‡æ–°èµ‹å€¼ã€‚<div class="language-kotlin line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> count </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">count </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // OK</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li></ul><blockquote><p>âš ï¸ æ³¨æ„ï¼š<code>val</code> ä¿®é¥°çš„å¯¹è±¡å†…éƒ¨çŠ¶æ€ä»å¯å˜ï¼ˆå¦‚ <code>val list = mutableListOf(1,2)</code> å¯ <code>list.add(3)</code>ï¼‰ã€‚</p></blockquote><hr><h3 id="_3-ç©ºå®‰å…¨æœºåˆ¶å¦‚ä½•å·¥ä½œ" tabindex="-1">3. <strong>ç©ºå®‰å…¨æœºåˆ¶å¦‚ä½•å·¥ä½œï¼Ÿ</strong> <a class="header-anchor" href="#_3-ç©ºå®‰å…¨æœºåˆ¶å¦‚ä½•å·¥ä½œ" aria-label="Permalink to â€œ3. ç©ºå®‰å…¨æœºåˆ¶å¦‚ä½•å·¥ä½œï¼Ÿâ€">â€‹</a></h3><h4 id="âœ…-å‚è€ƒç­”æ¡ˆ-2" tabindex="-1">âœ… å‚è€ƒç­”æ¡ˆï¼š <a class="header-anchor" href="#âœ…-å‚è€ƒç­”æ¡ˆ-2" aria-label="Permalink to â€œâœ… å‚è€ƒç­”æ¡ˆï¼šâ€">â€‹</a></h4><p>Kotlin é€šè¿‡ <strong>ç±»å‹ç³»ç»ŸåŒºåˆ†å¯ç©ºä¸éç©ºç±»å‹</strong>ï¼š</p><ul><li>éç©ºç±»å‹ï¼š<code>String</code> â†’ ä¸èƒ½ä¸º <code>null</code></li><li>å¯ç©ºç±»å‹ï¼š<code>String?</code> â†’ å¯ä¸º <code>null</code></li></ul><h4 id="å®‰å…¨è°ƒç”¨æ“ä½œç¬¦" tabindex="-1">å®‰å…¨è°ƒç”¨æ“ä½œç¬¦ <code>?.</code> <a class="header-anchor" href="#å®‰å…¨è°ƒç”¨æ“ä½œç¬¦" aria-label="Permalink to â€œå®‰å…¨è°ƒç”¨æ“ä½œç¬¦ ?.â€">â€‹</a></h4><div class="language-kotlin line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> length </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> str?.length </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// è‹¥ str ä¸º nullï¼Œç»“æœä¸º null</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h4 id="elvis-æ“ä½œç¬¦" tabindex="-1">Elvis æ“ä½œç¬¦ <code>?:</code> <a class="header-anchor" href="#elvis-æ“ä½œç¬¦" aria-label="Permalink to â€œElvis æ“ä½œç¬¦ ?:â€">â€‹</a></h4><div class="language-kotlin line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> user?.name ?: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Unknown&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // null æ—¶æä¾›é»˜è®¤å€¼</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h4 id="éç©ºæ–­è¨€" tabindex="-1">éç©ºæ–­è¨€ <code>!!</code> <a class="header-anchor" href="#éç©ºæ–­è¨€" aria-label="Permalink to â€œéç©ºæ–­è¨€ !!â€">â€‹</a></h4><div class="language-kotlin line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> length </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> str</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.length </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// è‹¥ str ä¸º nullï¼ŒæŠ›å‡º KotlinNullPointerException</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h4 id="å®‰å…¨è½¬æ¢-as" tabindex="-1">å®‰å…¨è½¬æ¢ <code>as?</code> <a class="header-anchor" href="#å®‰å…¨è½¬æ¢-as" aria-label="Permalink to â€œå®‰å…¨è½¬æ¢ as?â€">â€‹</a></h4><div class="language-kotlin line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> str </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> obj </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">? String </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// è½¬æ¢å¤±è´¥è¿”å› null</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><blockquote><p>ğŸ’¡ <strong>æ ¸å¿ƒæ€æƒ³</strong>ï¼š<strong>ç¼–è¯‘æœŸæœç» NPE</strong>ï¼Œå°†è¿è¡Œæ—¶é”™è¯¯è½¬ä¸ºç¼–è¯‘é”™è¯¯ã€‚</p></blockquote><hr><h2 id="äºŒã€kotlin-æ ¸å¿ƒç‰¹æ€§-ä¸­é«˜çº§é‡ç‚¹" tabindex="-1">äºŒã€Kotlin æ ¸å¿ƒç‰¹æ€§ï¼ˆä¸­é«˜çº§é‡ç‚¹ï¼‰ <a class="header-anchor" href="#äºŒã€kotlin-æ ¸å¿ƒç‰¹æ€§-ä¸­é«˜çº§é‡ç‚¹" aria-label="Permalink to â€œäºŒã€Kotlin æ ¸å¿ƒç‰¹æ€§ï¼ˆä¸­é«˜çº§é‡ç‚¹ï¼‰â€">â€‹</a></h2><h3 id="_4-æ‰©å±•å‡½æ•°-extension-functions-åŸç†" tabindex="-1">4. <strong>æ‰©å±•å‡½æ•°ï¼ˆExtension Functionsï¼‰åŸç†ï¼Ÿ</strong> <a class="header-anchor" href="#_4-æ‰©å±•å‡½æ•°-extension-functions-åŸç†" aria-label="Permalink to â€œ4. æ‰©å±•å‡½æ•°ï¼ˆExtension Functionsï¼‰åŸç†ï¼Ÿâ€">â€‹</a></h3><h4 id="âœ…-å‚è€ƒç­”æ¡ˆ-3" tabindex="-1">âœ… å‚è€ƒç­”æ¡ˆï¼š <a class="header-anchor" href="#âœ…-å‚è€ƒç­”æ¡ˆ-3" aria-label="Permalink to â€œâœ… å‚è€ƒç­”æ¡ˆï¼šâ€">â€‹</a></h4><ul><li><strong>ä½œç”¨</strong>ï¼šä¸ºå·²æœ‰ç±»ï¼ˆåŒ…æ‹¬ç¬¬ä¸‰æ–¹/ç³»ç»Ÿç±»ï¼‰æ·»åŠ æ–°æ–¹æ³•ï¼Œ<strong>æ— éœ€ç»§æ‰¿æˆ–ä¿®æ”¹æºç </strong>ã€‚</li><li><strong>åŸç†</strong>ï¼šç¼–è¯‘ä¸º <strong>é™æ€å·¥å…·æ–¹æ³•</strong>ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä¸ºæ¥æ”¶è€…å¯¹è±¡ã€‚<div class="language-kotlin line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Kotlin</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">fun</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lastChar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.length </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ç­‰ä»· Java</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> static char </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lastChar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(String $</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">charAt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">($</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">length</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></li><li><strong>Android åº”ç”¨</strong>ï¼š<div class="language-kotlin line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">fun</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> View</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">show</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.visibility </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> View.VISIBLE }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">textView.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">show</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// è°ƒç”¨æ‰©å±•å‡½æ•°</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li></ul><blockquote><p>âš ï¸ <strong>æ³¨æ„</strong>ï¼šæ‰©å±•å‡½æ•°æ— æ³•è®¿é—®ç±»çš„ç§æœ‰æˆå‘˜ã€‚</p></blockquote><hr><h3 id="_5-é«˜é˜¶å‡½æ•°ä¸-lambda-è¡¨è¾¾å¼" tabindex="-1">5. <strong>é«˜é˜¶å‡½æ•°ä¸ Lambda è¡¨è¾¾å¼</strong> <a class="header-anchor" href="#_5-é«˜é˜¶å‡½æ•°ä¸-lambda-è¡¨è¾¾å¼" aria-label="Permalink to â€œ5. é«˜é˜¶å‡½æ•°ä¸ Lambda è¡¨è¾¾å¼â€">â€‹</a></h3><h4 id="âœ…-å‚è€ƒç­”æ¡ˆ-4" tabindex="-1">âœ… å‚è€ƒç­”æ¡ˆï¼š <a class="header-anchor" href="#âœ…-å‚è€ƒç­”æ¡ˆ-4" aria-label="Permalink to â€œâœ… å‚è€ƒç­”æ¡ˆï¼šâ€">â€‹</a></h4><ul><li><strong>é«˜é˜¶å‡½æ•°</strong>ï¼šä»¥å‡½æ•°ä½œä¸ºå‚æ•°æˆ–è¿”å›å€¼çš„å‡½æ•°ã€‚</li><li><strong>Lambda</strong>ï¼šåŒ¿åå‡½æ•°ï¼Œè¯­æ³• <code>(params) -&gt; body</code></li><li><strong>Android ç¤ºä¾‹</strong>ï¼š<div class="language-kotlin line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// é«˜é˜¶å‡½æ•°</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">fun</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> onClick</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(action: () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Unit) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    button.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setOnClickListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">action</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// è°ƒç”¨</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">onClick</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">toast</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Clicked!&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></li><li><strong>SAM è½¬æ¢</strong>ï¼šKotlin è‡ªåŠ¨å°† lambda è½¬ä¸º Java å•æŠ½è±¡æ–¹æ³•æ¥å£ï¼ˆå¦‚ <code>OnClickListener</code>ï¼‰ã€‚</li></ul><blockquote><p>ğŸ’¡ <strong>ä¼˜åŠ¿</strong>ï¼šç®€åŒ–å›è°ƒã€å®ç° DSLï¼ˆå¦‚ Ankoã€Ktorï¼‰ã€‚</p></blockquote><hr><h3 id="_6-lateinit-å’Œ-by-lazy-çš„åŒºåˆ«" tabindex="-1">6. <strong><code>lateinit</code> å’Œ <code>by lazy</code> çš„åŒºåˆ«ï¼Ÿ</strong> <a class="header-anchor" href="#_6-lateinit-å’Œ-by-lazy-çš„åŒºåˆ«" aria-label="Permalink to â€œ6. lateinit å’Œ by lazy çš„åŒºåˆ«ï¼Ÿâ€">â€‹</a></h3><h4 id="âœ…-å‚è€ƒç­”æ¡ˆ-5" tabindex="-1">âœ… å‚è€ƒç­”æ¡ˆï¼š <a class="header-anchor" href="#âœ…-å‚è€ƒç­”æ¡ˆ-5" aria-label="Permalink to â€œâœ… å‚è€ƒç­”æ¡ˆï¼šâ€">â€‹</a></h4><table tabindex="0"><thead><tr><th>ç‰¹æ€§</th><th><code>lateinit var</code></th><th><code>by lazy</code></th></tr></thead><tbody><tr><td><strong>é€‚ç”¨ç±»å‹</strong></td><td><code>var</code>ï¼ˆéç©ºã€éåŸºæœ¬ç±»å‹ï¼‰</td><td><code>val</code></td></tr><tr><td><strong>åˆå§‹åŒ–æ—¶æœº</strong></td><td>æ‰‹åŠ¨åˆå§‹åŒ–ï¼ˆä»»æ„ä½ç½®ï¼‰</td><td>é¦–æ¬¡è®¿é—®æ—¶æ‡’åŠ è½½</td></tr><tr><td><strong>çº¿ç¨‹å®‰å…¨</strong></td><td>âŒ ä¸ä¿è¯</td><td>âœ… é»˜è®¤çº¿ç¨‹å®‰å…¨ï¼ˆ<code>LazyThreadSafetyMode.SYNCHRONIZED</code>ï¼‰</td></tr><tr><td><strong>ä½¿ç”¨åœºæ™¯</strong></td><td>Android View å¼•ç”¨ï¼ˆ<code>onCreate</code> ä¸­åˆå§‹åŒ–ï¼‰</td><td>å•ä¾‹ã€è€—æ—¶å¯¹è±¡</td></tr></tbody></table><h4 id="ç¤ºä¾‹" tabindex="-1">ç¤ºä¾‹ï¼š <a class="header-anchor" href="#ç¤ºä¾‹" aria-label="Permalink to â€œç¤ºä¾‹ï¼šâ€">â€‹</a></h4><div class="language-kotlin line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// lateinit</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">lateinit</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> adapter: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">MyAdapter</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">override</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> fun</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> onCreate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    adapter </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MyAdapter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æ‰‹åŠ¨åˆå§‹åŒ–</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// lazy</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> database </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">by</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> lazy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { Room.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">databaseBuilder</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">..</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">build</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><blockquote><p>âš ï¸ <strong>æ³¨æ„</strong>ï¼šè®¿é—®æœªåˆå§‹åŒ–çš„ <code>lateinit</code> ä¼šæŠ› <code>UninitializedPropertyAccessException</code>ã€‚</p></blockquote><hr><h2 id="ä¸‰ã€åç¨‹-coroutine-â€”â€”-é«˜é¢‘é‡ç‚¹" tabindex="-1">ä¸‰ã€åç¨‹ï¼ˆCoroutineï¼‰â€”â€” é«˜é¢‘é‡ç‚¹ï¼ <a class="header-anchor" href="#ä¸‰ã€åç¨‹-coroutine-â€”â€”-é«˜é¢‘é‡ç‚¹" aria-label="Permalink to â€œä¸‰ã€åç¨‹ï¼ˆCoroutineï¼‰â€”â€” é«˜é¢‘é‡ç‚¹ï¼â€">â€‹</a></h2><h3 id="_7-åç¨‹æ˜¯ä»€ä¹ˆ-ç›¸æ¯”çº¿ç¨‹-asynctask-rxjava-ä¼˜åŠ¿" tabindex="-1">7. <strong>åç¨‹æ˜¯ä»€ä¹ˆï¼Ÿç›¸æ¯”çº¿ç¨‹/AsyncTask/RxJava ä¼˜åŠ¿ï¼Ÿ</strong> <a class="header-anchor" href="#_7-åç¨‹æ˜¯ä»€ä¹ˆ-ç›¸æ¯”çº¿ç¨‹-asynctask-rxjava-ä¼˜åŠ¿" aria-label="Permalink to â€œ7. åç¨‹æ˜¯ä»€ä¹ˆï¼Ÿç›¸æ¯”çº¿ç¨‹/AsyncTask/RxJava ä¼˜åŠ¿ï¼Ÿâ€">â€‹</a></h3><h4 id="âœ…-å‚è€ƒç­”æ¡ˆ-6" tabindex="-1">âœ… å‚è€ƒç­”æ¡ˆï¼š <a class="header-anchor" href="#âœ…-å‚è€ƒç­”æ¡ˆ-6" aria-label="Permalink to â€œâœ… å‚è€ƒç­”æ¡ˆï¼šâ€">â€‹</a></h4><ul><li><strong>åç¨‹</strong>ï¼šè½»é‡çº§ <strong>å¹¶å‘è®¾è®¡æ¨¡å¼</strong>ï¼ˆéçº¿ç¨‹ï¼‰ï¼Œç”± Kotlin å®˜æ–¹åº“å®ç°ã€‚</li><li><strong>æ ¸å¿ƒä¼˜åŠ¿</strong>ï¼š <ul><li><strong>è½»é‡</strong>ï¼š1 ä¸ªçº¿ç¨‹å¯è¿è¡Œæ•°åƒåç¨‹ï¼ˆçº¿ç¨‹æ ˆ ~1MBï¼Œåç¨‹æ ˆ ~KBï¼‰</li><li><strong>è¯­æ³•ç®€æ´</strong>ï¼š<code>suspend</code> å‡½æ•° + ç»“æ„åŒ–å¹¶å‘</li><li><strong>å¼‚å¸¸å¤„ç†ç»Ÿä¸€</strong>ï¼š<code>CoroutineExceptionHandler</code></li><li><strong>é¿å…å›è°ƒåœ°ç‹±</strong>ï¼šé¡ºåºå†™æ³•å¤„ç†å¼‚æ­¥</li></ul></li></ul><h4 id="å¯¹æ¯”" tabindex="-1">å¯¹æ¯”ï¼š <a class="header-anchor" href="#å¯¹æ¯”" aria-label="Permalink to â€œå¯¹æ¯”ï¼šâ€">â€‹</a></h4><table tabindex="0"><thead><tr><th>æ–¹æ¡ˆ</th><th>é—®é¢˜</th></tr></thead><tbody><tr><td><strong>Thread</strong></td><td>èµ„æºæ¶ˆè€—å¤§ï¼Œåˆ‡æ¢å¼€é”€é«˜</td></tr><tr><td><strong>AsyncTask</strong></td><td>å·²åºŸå¼ƒï¼Œå†…å­˜æ³„æ¼é£é™©</td></tr><tr><td><strong>RxJava</strong></td><td>å­¦ä¹ æ›²çº¿é™¡å³­ï¼ŒèƒŒå‹å¤æ‚</td></tr><tr><td><strong>åç¨‹</strong></td><td>å®˜æ–¹æ¨èï¼Œä¸ Kotlin æ·±åº¦é›†æˆ</td></tr></tbody></table><blockquote><p>ğŸ’¡ <strong>Android å®˜æ–¹æ¨è</strong>ï¼šåç¨‹æ˜¯ Android å¼‚æ­¥ç¼–ç¨‹çš„é¦–é€‰æ–¹æ¡ˆã€‚</p></blockquote><hr><h3 id="_8-suspend-å‡½æ•°åŸç†-ä¸ºä»€ä¹ˆä¸èƒ½åœ¨ä¸»çº¿ç¨‹ç›´æ¥è°ƒç”¨" tabindex="-1">8. <strong><code>suspend</code> å‡½æ•°åŸç†ï¼Ÿä¸ºä»€ä¹ˆä¸èƒ½åœ¨ä¸»çº¿ç¨‹ç›´æ¥è°ƒç”¨ï¼Ÿ</strong> <a class="header-anchor" href="#_8-suspend-å‡½æ•°åŸç†-ä¸ºä»€ä¹ˆä¸èƒ½åœ¨ä¸»çº¿ç¨‹ç›´æ¥è°ƒç”¨" aria-label="Permalink to â€œ8. suspend å‡½æ•°åŸç†ï¼Ÿä¸ºä»€ä¹ˆä¸èƒ½åœ¨ä¸»çº¿ç¨‹ç›´æ¥è°ƒç”¨ï¼Ÿâ€">â€‹</a></h3><h4 id="âœ…-å‚è€ƒç­”æ¡ˆ-7" tabindex="-1">âœ… å‚è€ƒç­”æ¡ˆï¼š <a class="header-anchor" href="#âœ…-å‚è€ƒç­”æ¡ˆ-7" aria-label="Permalink to â€œâœ… å‚è€ƒç­”æ¡ˆï¼šâ€">â€‹</a></h4><ul><li><strong><code>suspend</code> å‡½æ•°</strong>ï¼šå¯æŒ‚èµ·å’Œæ¢å¤çš„å‡½æ•°ï¼Œ<strong>åªèƒ½åœ¨åç¨‹æˆ–å…¶ä»– <code>suspend</code> å‡½æ•°ä¸­è°ƒç”¨</strong>ã€‚</li><li><strong>åŸç†</strong>ï¼š <ul><li>ç¼–è¯‘å™¨å°† <code>suspend</code> å‡½æ•°è½¬æ¢ä¸º <strong>çŠ¶æ€æœº</strong>ï¼ˆå¸¦ <code>Continuation</code> å›è°ƒï¼‰</li><li>æŒ‚èµ·æ—¶ä¿å­˜çŠ¶æ€ï¼Œæ¢å¤æ—¶ä»æ–­ç‚¹ç»§ç»­æ‰§è¡Œ</li></ul></li><li><strong>ä¸ºä»€ä¹ˆä¸èƒ½åœ¨ä¸»çº¿ç¨‹ç›´æ¥è°ƒç”¨ï¼Ÿ</strong><ul><li><code>suspend</code> å‡½æ•°æœ¬èº«<strong>ä¸åˆ‡æ¢çº¿ç¨‹</strong>ï¼</li><li>è‹¥åœ¨ä¸»çº¿ç¨‹è°ƒç”¨è€—æ—¶ <code>suspend</code> å‡½æ•°ï¼ˆå¦‚ <code>delay(5000)</code>ï¼‰ï¼Œä»ä¼šé˜»å¡ä¸»çº¿ç¨‹ã€‚</li><li><strong>æ­£ç¡®åšæ³•</strong>ï¼šç”¨ <code>withContext(Dispatchers.IO)</code> åˆ‡æ¢åˆ°åå°çº¿ç¨‹ã€‚</li></ul></li></ul><h4 id="ç¤ºä¾‹-1" tabindex="-1">ç¤ºä¾‹ï¼š <a class="header-anchor" href="#ç¤ºä¾‹-1" aria-label="Permalink to â€œç¤ºä¾‹ï¼šâ€">â€‹</a></h4><div class="language-kotlin line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// âŒ é”™è¯¯ï¼šåœ¨ä¸»çº¿ç¨‹æ‰§è¡Œè€—æ—¶æ“ä½œ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">suspend</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> fun</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> fetchData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    val</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> data</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> api.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ç½‘ç»œè¯·æ±‚ï¼ˆåº”æ”¾ IO çº¿ç¨‹ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// âœ… æ­£ç¡®</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">suspend</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> fun</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> fetchData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> withContext</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Dispatchers.IO) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    api.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><hr><h3 id="_9-åç¨‹ä½œç”¨åŸŸ-scope-ä¸ç»“æ„åŒ–å¹¶å‘" tabindex="-1">9. <strong>åç¨‹ä½œç”¨åŸŸï¼ˆScopeï¼‰ä¸ç»“æ„åŒ–å¹¶å‘</strong> <a class="header-anchor" href="#_9-åç¨‹ä½œç”¨åŸŸ-scope-ä¸ç»“æ„åŒ–å¹¶å‘" aria-label="Permalink to â€œ9. åç¨‹ä½œç”¨åŸŸï¼ˆScopeï¼‰ä¸ç»“æ„åŒ–å¹¶å‘â€">â€‹</a></h3><h4 id="âœ…-å‚è€ƒç­”æ¡ˆ-8" tabindex="-1">âœ… å‚è€ƒç­”æ¡ˆï¼š <a class="header-anchor" href="#âœ…-å‚è€ƒç­”æ¡ˆ-8" aria-label="Permalink to â€œâœ… å‚è€ƒç­”æ¡ˆï¼šâ€">â€‹</a></h4><ul><li><strong>ç»“æ„åŒ–å¹¶å‘</strong>ï¼šåç¨‹å¿…é¡»åœ¨ <strong>ä½œç”¨åŸŸï¼ˆScopeï¼‰</strong> å†…å¯åŠ¨ï¼Œçˆ¶åç¨‹å–æ¶ˆæ—¶è‡ªåŠ¨å–æ¶ˆæ‰€æœ‰å­åç¨‹ã€‚</li><li><strong>å¸¸ç”¨ Scope</strong>ï¼š <ul><li><code>viewModelScope</code>ï¼ˆViewModel ä¸­ï¼‰ï¼šActivity é”€æ¯æ—¶è‡ªåŠ¨å–æ¶ˆ</li><li><code>lifecycleScope</code>ï¼ˆActivity/Fragment ä¸­ï¼‰ï¼šç”Ÿå‘½å‘¨æœŸç»“æŸæ—¶å–æ¶ˆ</li><li><code>CoroutineScope</code>ï¼šè‡ªå®šä¹‰ä½œç”¨åŸŸï¼ˆéœ€æ‰‹åŠ¨ç®¡ç†ç”Ÿå‘½å‘¨æœŸï¼‰</li></ul></li></ul><h4 id="ç¤ºä¾‹-2" tabindex="-1">ç¤ºä¾‹ï¼š <a class="header-anchor" href="#ç¤ºä¾‹-2" aria-label="Permalink to â€œç¤ºä¾‹ï¼šâ€">â€‹</a></h4><div class="language-kotlin line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ViewModel ä¸­</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">fun</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> loadData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    viewModelScope.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">launch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        val</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> data</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> repository.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fetchData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        _uiState.</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">value</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> data</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Activity é”€æ¯æ—¶ï¼ŒviewModelScope è‡ªåŠ¨å–æ¶ˆåç¨‹</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><blockquote><p>ğŸ’¡ <strong>ä¼˜åŠ¿</strong>ï¼šé¿å…å†…å­˜æ³„æ¼å’Œæ— æ•ˆå›è°ƒã€‚</p></blockquote><hr><h2 id="å››ã€android-å¼€å‘å®è·µ-ç»“åˆ-kotlin" tabindex="-1">å››ã€Android å¼€å‘å®è·µï¼ˆç»“åˆ Kotlinï¼‰ <a class="header-anchor" href="#å››ã€android-å¼€å‘å®è·µ-ç»“åˆ-kotlin" aria-label="Permalink to â€œå››ã€Android å¼€å‘å®è·µï¼ˆç»“åˆ Kotlinï¼‰â€">â€‹</a></h2><h3 id="_10-kotlin-åœ¨-android-ä¸­çš„æœ€ä½³å®è·µ" tabindex="-1">10. <strong>Kotlin åœ¨ Android ä¸­çš„æœ€ä½³å®è·µï¼Ÿ</strong> <a class="header-anchor" href="#_10-kotlin-åœ¨-android-ä¸­çš„æœ€ä½³å®è·µ" aria-label="Permalink to â€œ10. Kotlin åœ¨ Android ä¸­çš„æœ€ä½³å®è·µï¼Ÿâ€">â€‹</a></h3><h4 id="âœ…-å‚è€ƒç­”æ¡ˆ-9" tabindex="-1">âœ… å‚è€ƒç­”æ¡ˆï¼š <a class="header-anchor" href="#âœ…-å‚è€ƒç­”æ¡ˆ-9" aria-label="Permalink to â€œâœ… å‚è€ƒç­”æ¡ˆï¼šâ€">â€‹</a></h4><ul><li><strong>ç©ºå®‰å…¨</strong>ï¼šç”¨ <code>?.</code>ã€<code>?:</code> å¤„ç†å¯ç©º Viewï¼ˆå¦‚ <code>findViewById</code>ï¼‰</li><li><strong>æ‰©å±•å‡½æ•°</strong>ï¼šå°è£…å¸¸ç”¨é€»è¾‘<div class="language-kotlin line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">fun</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Context</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">toast</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(message: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Toast.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">makeText</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, message, Toast.LENGTH_SHORT).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">show</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></li><li><strong>æ•°æ®ç±»</strong>ï¼šæ›¿ä»£ Java POJO<div class="language-kotlin line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">data</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> User</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> id: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> name: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></li><li><strong>åç¨‹</strong>ï¼šæ›¿ä»£ AsyncTask/RxJava å¤„ç†å¼‚æ­¥</li><li><strong>å§”æ‰˜å±æ€§</strong>ï¼šç®€åŒ– SharedPreferences æ“ä½œ<div class="language-kotlin line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Settings</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> context: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Context</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> prefs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> context.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getSharedPreferences</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;settings&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, Context.MODE_PRIVATE)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> username: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">String</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> by</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> prefs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">stringPref</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;username&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li></ul><hr><h3 id="_11-å¦‚ä½•ç”¨-kotlin-ä¼˜åŒ–-recyclerview-adapter" tabindex="-1">11. <strong>å¦‚ä½•ç”¨ Kotlin ä¼˜åŒ– RecyclerView Adapterï¼Ÿ</strong> <a class="header-anchor" href="#_11-å¦‚ä½•ç”¨-kotlin-ä¼˜åŒ–-recyclerview-adapter" aria-label="Permalink to â€œ11. å¦‚ä½•ç”¨ Kotlin ä¼˜åŒ– RecyclerView Adapterï¼Ÿâ€">â€‹</a></h3><h4 id="âœ…-å‚è€ƒç­”æ¡ˆ-10" tabindex="-1">âœ… å‚è€ƒç­”æ¡ˆï¼š <a class="header-anchor" href="#âœ…-å‚è€ƒç­”æ¡ˆ-10" aria-label="Permalink to â€œâœ… å‚è€ƒç­”æ¡ˆï¼šâ€">â€‹</a></h4><ul><li><strong>ä½¿ç”¨ <code>ListAdapter</code> + <code>DiffUtil</code></strong>ï¼ˆKotlin ç®€åŒ–å†™æ³•ï¼‰<div class="language-kotlin line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> UserAdapter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> : </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ListAdapter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">User</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">UserViewHolder</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">UserDiffCallback</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    override</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> fun</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> onCreateViewHolder</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">..</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> UserViewHolder</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">..</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    override</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> fun</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> onBindViewHolder</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(holder, position) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        holder.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">bind</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getItem</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(position))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> UserDiffCallback</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> : </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">DiffUtil</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ItemCallback</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">User</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    override</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> fun</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> areItemsTheSame</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(old: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">User</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, new: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">User</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> old.id </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> new.id</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    override</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> fun</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> areContentsTheSame</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(old: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">User</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, new: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">User</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> old </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> new</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div></li><li><strong>Lambda ç®€åŒ–ç‚¹å‡»äº‹ä»¶</strong>ï¼š<div class="language-kotlin line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> UserViewHolder</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">..</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.) : </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">RecyclerView</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ViewHolder</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">..</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    fun</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> bind</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(user: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">User</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, onItemClick: (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">User</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) -&gt; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Unit</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        itemView.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setOnClickListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">onItemClick</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(user) }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li></ul><hr><h2 id="äº”ã€æ€§èƒ½ä¸è¿›é˜¶-é«˜çº§è€ƒç‚¹" tabindex="-1">äº”ã€æ€§èƒ½ä¸è¿›é˜¶ï¼ˆé«˜çº§è€ƒç‚¹ï¼‰ <a class="header-anchor" href="#äº”ã€æ€§èƒ½ä¸è¿›é˜¶-é«˜çº§è€ƒç‚¹" aria-label="Permalink to â€œäº”ã€æ€§èƒ½ä¸è¿›é˜¶ï¼ˆé«˜çº§è€ƒç‚¹ï¼‰â€">â€‹</a></h2><h3 id="_12-kotlin-ç¼–è¯‘åçš„å­—èŠ‚ç æœ‰ä»€ä¹ˆç‰¹ç‚¹-å¦‚ä½•ä¼˜åŒ–" tabindex="-1">12. <strong>Kotlin ç¼–è¯‘åçš„å­—èŠ‚ç æœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿå¦‚ä½•ä¼˜åŒ–ï¼Ÿ</strong> <a class="header-anchor" href="#_12-kotlin-ç¼–è¯‘åçš„å­—èŠ‚ç æœ‰ä»€ä¹ˆç‰¹ç‚¹-å¦‚ä½•ä¼˜åŒ–" aria-label="Permalink to â€œ12. Kotlin ç¼–è¯‘åçš„å­—èŠ‚ç æœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿå¦‚ä½•ä¼˜åŒ–ï¼Ÿâ€">â€‹</a></h3><h4 id="âœ…-å‚è€ƒç­”æ¡ˆ-11" tabindex="-1">âœ… å‚è€ƒç­”æ¡ˆï¼š <a class="header-anchor" href="#âœ…-å‚è€ƒç­”æ¡ˆ-11" aria-label="Permalink to â€œâœ… å‚è€ƒç­”æ¡ˆï¼šâ€">â€‹</a></h4><ul><li><strong>ç‰¹ç‚¹</strong>ï¼š <ul><li>æ‰©å±•å‡½æ•° â†’ é™æ€æ–¹æ³•</li><li>æ•°æ®ç±» â†’ è‡ªåŠ¨ç”Ÿæˆ <code>equals</code>/<code>hashCode</code>/<code>toString</code></li><li>åç¨‹ â†’ çŠ¶æ€æœºç±»ï¼ˆå¸¦ <code>Continuation</code>ï¼‰</li></ul></li><li><strong>ä¼˜åŒ–å»ºè®®</strong>ï¼š <ul><li>é¿å…åœ¨å¾ªç¯ä¸­åˆ›å»º lambdaï¼ˆç”¨ <code>inline</code> å‡½æ•°ï¼‰</li><li>ç”¨ <code>@JvmStatic</code>/<code>@JvmField</code> å‡å°‘åŒ…è£…</li><li>å¯ç”¨ <strong>R8 ä»£ç å‹ç¼©</strong>ï¼ˆè‡ªåŠ¨ä¼˜åŒ– Kotlin å­—èŠ‚ç ï¼‰</li></ul></li></ul><blockquote><p>ğŸ” <strong>å·¥å…·</strong>ï¼šAndroid Studio â†’ <code>Tools &gt; Kotlin &gt; Show Kotlin Bytecode</code></p></blockquote><hr><h3 id="_13-inlineã€noinlineã€crossinline-çš„ä½œç”¨" tabindex="-1">13. <strong><code>inline</code>ã€<code>noinline</code>ã€<code>crossinline</code> çš„ä½œç”¨ï¼Ÿ</strong> <a class="header-anchor" href="#_13-inlineã€noinlineã€crossinline-çš„ä½œç”¨" aria-label="Permalink to â€œ13. inlineã€noinlineã€crossinline çš„ä½œç”¨ï¼Ÿâ€">â€‹</a></h3><h4 id="âœ…-å‚è€ƒç­”æ¡ˆ-12" tabindex="-1">âœ… å‚è€ƒç­”æ¡ˆï¼š <a class="header-anchor" href="#âœ…-å‚è€ƒç­”æ¡ˆ-12" aria-label="Permalink to â€œâœ… å‚è€ƒç­”æ¡ˆï¼šâ€">â€‹</a></h4><ul><li><strong><code>inline</code></strong>ï¼š<strong>å†…è”å‡½æ•°</strong>ï¼Œç¼–è¯‘æ—¶å°†å‡½æ•°ä½“å¤åˆ¶åˆ°è°ƒç”¨å¤„ï¼Œé¿å… lambda å¯¹è±¡åˆ›å»ºã€‚<div class="language-kotlin line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">inline</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> fun</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">T</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lock</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(lock: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Lock</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, body: () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> T): </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">T</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    lock.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lock</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> body</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">finally</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { lock.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">unlock</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li><li><strong><code>noinline</code></strong>ï¼šæ ‡è®° lambda <strong>ä¸å†…è”</strong>ï¼ˆå¦‚éœ€ä½œä¸ºå‚æ•°ä¼ é€’ï¼‰<div class="language-kotlin line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">inline</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> fun</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> foo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(a: () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Unit, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">noinline</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> b: () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Unit) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    a</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å†…è”</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    someFunction</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(b) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// b ä¸èƒ½å†…è”ï¼ˆéœ€å¯¹è±¡å¼•ç”¨ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li><li><strong><code>crossinline</code></strong>ï¼šç¦æ­¢ lambda ä¸­ä½¿ç”¨ <strong>éå±€éƒ¨è¿”å›</strong>ï¼ˆå¦‚ <code>return@foo</code>ï¼‰<div class="language-kotlin line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">inline</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> fun</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> runAfter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(delay: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Long</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">crossinline</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> block: () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Unit) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    thread</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        Thread.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sleep</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(delay)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        block</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// è‹¥ block æœ‰ returnï¼Œä¼šé€€å‡º thread è€Œé runAfter</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li></ul><blockquote><p>ğŸ’¡ <strong>é€‚ç”¨åœºæ™¯</strong>ï¼šé«˜é˜¶å‡½æ•°ã€æ€§èƒ½æ•æ„Ÿä»£ç ã€‚</p></blockquote><hr><h2 id="å…­ã€é«˜é¢‘æ‰‹å†™é¢˜" tabindex="-1">å…­ã€é«˜é¢‘æ‰‹å†™é¢˜ <a class="header-anchor" href="#å…­ã€é«˜é¢‘æ‰‹å†™é¢˜" aria-label="Permalink to â€œå…­ã€é«˜é¢‘æ‰‹å†™é¢˜â€">â€‹</a></h2><h3 id="_1-å®ç°ä¸€ä¸ªå®‰å…¨çš„-sharedpreferences-å§”æ‰˜" tabindex="-1">1. <strong>å®ç°ä¸€ä¸ªå®‰å…¨çš„ SharedPreferences å§”æ‰˜</strong> <a class="header-anchor" href="#_1-å®ç°ä¸€ä¸ªå®‰å…¨çš„-sharedpreferences-å§”æ‰˜" aria-label="Permalink to â€œ1. å®ç°ä¸€ä¸ªå®‰å…¨çš„ SharedPreferences å§”æ‰˜â€">â€‹</a></h3><div class="language-kotlin line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">object</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> SharedPreferencesDelegate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    fun</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">T</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">SharedPreferences</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">property</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        key: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        defaultValue: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">T</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ): </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ReadWriteProperty</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Any</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">?, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">T</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> when</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (defaultValue) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        is</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> String </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> StringPreference</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, key, defaultValue)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        is</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Boolean </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> BooleanPreference</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, key, defaultValue)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        else</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> -&gt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> throw</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> IllegalArgumentException</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Unsupported type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> StringPreference</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> prefs: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">SharedPreferences</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> key: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> default: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">String</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) : </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ReadWriteProperty</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Any</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">?, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    override</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> fun</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> getValue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(thisRef: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Any</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">?, property: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">KProperty</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;*&gt;): </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">String</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        prefs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getString</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(key, default) ?: default</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    override</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> fun</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> setValue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(thisRef: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Any</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">?, property: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">KProperty</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;*&gt;, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">value</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        prefs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">edit</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">putString</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(key, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">value</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">apply</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ä½¿ç”¨</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Settings</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(context: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Context</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> prefs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> context.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getSharedPreferences</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;app&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, Context.MODE_PRIVATE)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> username: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">String</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> by</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> prefs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">property</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;username&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><h3 id="_2-åç¨‹å°è£…ç½‘ç»œè¯·æ±‚" tabindex="-1">2. <strong>åç¨‹å°è£…ç½‘ç»œè¯·æ±‚</strong> <a class="header-anchor" href="#_2-åç¨‹å°è£…ç½‘ç»œè¯·æ±‚" aria-label="Permalink to â€œ2. åç¨‹å°è£…ç½‘ç»œè¯·æ±‚â€">â€‹</a></h3><div class="language-kotlin line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> UserRepository</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    suspend</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> fun</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> getUser</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(id: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">): </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Result</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">User</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> withContext</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Dispatchers.IO) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> response </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> api.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getUser</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(id)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            Result.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">success</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(response)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (e: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Exception</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            Result.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">failure</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(e)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ViewModel ä¸­è°ƒç”¨</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">fun</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> loadUser</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(id: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    viewModelScope.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">launch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        when</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> repository.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getUser</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(id)) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            is</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Result.Success </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> _user.</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">value</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> result.</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">data</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            is</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Result.Failure </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> _error.</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">value</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> result.exception</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><hr><h2 id="ä¸ƒã€é¢è¯•å»ºè®®" tabindex="-1">ä¸ƒã€é¢è¯•å»ºè®® <a class="header-anchor" href="#ä¸ƒã€é¢è¯•å»ºè®®" aria-label="Permalink to â€œä¸ƒã€é¢è¯•å»ºè®®â€">â€‹</a></h2><table tabindex="0"><thead><tr><th>èŒçº§</th><th>é‡ç‚¹æ–¹å‘</th></tr></thead><tbody><tr><td><strong>åˆçº§</strong></td><td>åŸºç¡€è¯­æ³•ã€ç©ºå®‰å…¨ã€æ‰©å±•å‡½æ•°</td></tr><tr><td><strong>ä¸­çº§</strong></td><td>åç¨‹åŸç†ã€é«˜é˜¶å‡½æ•°ã€Android å®è·µ</td></tr><tr><td><strong>é«˜çº§</strong></td><td>åç¨‹æºç ã€å­—èŠ‚ç ä¼˜åŒ–ã€æ€§èƒ½è°ƒä¼˜</td></tr></tbody></table><h3 id="âœ…-å‡†å¤‡ç­–ç•¥" tabindex="-1">âœ… å‡†å¤‡ç­–ç•¥ï¼š <a class="header-anchor" href="#âœ…-å‡†å¤‡ç­–ç•¥" aria-label="Permalink to â€œâœ… å‡†å¤‡ç­–ç•¥ï¼šâ€">â€‹</a></h3><ol><li><strong>åŠ¨æ‰‹å†™åç¨‹ä»£ç </strong>ï¼šç¡®ä¿èƒ½æ‰‹å†™ <code>viewModelScope</code> + <code>withContext</code>ã€‚</li><li><strong>ç†è§£ç©ºå®‰å…¨</strong>ï¼šèƒ½è§£é‡Š <code>?</code>ã€<code>?.</code>ã€<code>?:</code>ã€<code>!!</code> çš„ä½¿ç”¨åœºæ™¯ã€‚</li><li><strong>é¡¹ç›®ç»“åˆ</strong>ï¼šå‡†å¤‡ 1-2 ä¸ªç”¨ Kotlin ä¼˜åŒ– Android é¡¹ç›®çš„æ¡ˆä¾‹ã€‚</li><li><strong>å…³æ³¨æ–°ç‰¹æ€§</strong>ï¼šå¦‚ Kotlin Multiplatformï¼ˆKMPï¼‰åœ¨è·¨ç«¯ä¸­çš„åº”ç”¨ã€‚</li></ol></div></div></main><footer class="VPDocFooter" data-v-7011f0d8 data-v-e257564d><!--[--><!--]--><div class="edit-info" data-v-e257564d><div class="edit-link" data-v-e257564d><a class="VPLink link vp-external-link-icon no-icon edit-link-button" href="https://github.com/yuan0x00/VitePress/blob/main/docs/kotlin/index.md" target="_blank" rel="noreferrer" data-v-e257564d><!--[--><span class="vpi-square-pen edit-link-icon" data-v-e257564d></span> Edit this page<!--]--></a></div><div class="last-updated" data-v-e257564d><p class="VPLastUpdated" data-v-e257564d data-v-e98dd255>æœ€è¿‘æ›´æ–°: <time datetime="2025-10-11T16:37:12.000Z" data-v-e98dd255></time></p></div></div><!----></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!--]--></div></div>
    
    
  </body>
</html>